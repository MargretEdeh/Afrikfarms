"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[157],{654:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(71847).A)("tractor",[["path",{d:"m10 11 11 .9a1 1 0 0 1 .8 1.1l-.665 4.158a1 1 0 0 1-.988.842H20",key:"she1j9"}],["path",{d:"M16 18h-5",key:"bq60fd"}],["path",{d:"M18 5a1 1 0 0 0-1 1v5.573",key:"1kv8ia"}],["path",{d:"M3 4h8.129a1 1 0 0 1 .99.863L13 11.246",key:"1q1ert"}],["path",{d:"M4 11V4",key:"9ft8pt"}],["path",{d:"M7 15h.01",key:"k5ht0j"}],["path",{d:"M8 10.1V4",key:"1jgyzo"}],["circle",{cx:"18",cy:"18",r:"2",key:"1emm8v"}],["circle",{cx:"7",cy:"15",r:"5",key:"ddtuc"}]])},9540:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(71847).A)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]])},12862:(e,t,a)=>{a.d(t,{A:()=>s});let r=a(95125).A.create({baseURL:"https://backend-api.afrikfarm.com/api/v1",headers:{"Content-Type":"application/json"}});r.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e});let s=r},18323:(e,t,a)=>{a.d(t,{u:()=>s});var r=a(12862);let s={loginAdmin:async(e,t)=>(await r.A.post("/auth/admin-login",{email:e,password:t})).data,loginUser:async(e,t)=>(await r.A.post("/auth/login",{login_id:e,password:t})).data,registerSuperAdmin:async e=>(await r.A.post("/auth/admin-register",e)).data,createUser:async e=>(await r.A.post("/admin/create-user",e)).data,getProfile:async()=>(await r.A.get("/auth/me")).data,getCountries:async()=>(await r.A.get("/admin/countries")).data,getStates:async()=>(await r.A.get("/admin/states")).data,getLgas:async()=>(await r.A.get("/admin/lgas")).data,logout:async()=>(await r.A.post("/auth/admin-logout")).data}},20063:(e,t,a)=>{var r=a(47260);a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},24033:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(71847).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},27543:(e,t,a)=>{a.d(t,{A:()=>w});var r=a(95155),s=a(20063),l=a(97881),n=a(15239),o=a(52619),i=a.n(o);let d=(0,a(71847).A)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var c=a(96583),u=a(91169),h=a(654),m=a(89715),p=a(75882),x=a(91761),g=a(61362),f=a(80534),y=a(84926),b=a(49730);let v=[{icon:d,label:"Dashboard",href:"/admin/dashboard"},{icon:c.A,label:"Create Admin",href:"/admin/dashboard/create-admin"},{icon:u.A,label:"Farmers",href:"/admin/dashboard/farmers"},{icon:h.A,label:"Farms",href:"/admin/dashboard/farms"},{icon:m.A,label:"Farm Updates",href:"/admin/dashboard/updates"},{icon:p.A,label:"Revenue",href:"/admin/dashboard/revenue"}],k=[{icon:d,label:"Dashboard",href:"/dashboard"},{icon:u.A,label:"Farmers",href:"/dashboard/farmers"},{icon:h.A,label:"Farms",href:"/dashboard/farms"},{icon:m.A,label:"Farm Updates",href:"/dashboard/updates"},{icon:x.A,label:"Loan Applications",href:"/dashboard/loans"},{icon:g.A,label:"Verification",href:"/dashboard/verification"},{icon:f.A,label:"Reports",href:"/dashboard/reports"}];function w(e){var t,a,o;let{onLogout:d}=e,c=(0,s.usePathname)()||"/dashboard",{user:u}=(0,b.A)(),h=null==u||null==(t=u.role)?void 0:t.toLowerCase().includes("super");return(0,r.jsxs)("aside",{className:"w-72 bg-sidebar border-r border-sidebar-border flex flex-col h-screen sticky top-0 shadow-sm",children:[(0,r.jsx)(l.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"p-6 border-b border-sidebar-border",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(l.P.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:(0,r.jsx)(i(),{href:"/",className:"flex items-center gap-3 group",children:(0,r.jsx)(n.default,{src:"/afrikfarms.png",alt:"Afrik Farm Logo",width:100,height:100})})}),(0,r.jsx)("div",{children:(0,r.jsx)("p",{className:"text-xs text-muted-foreground font-medium",children:h?"Super Admin Portal":"LGA Portal"})})]})}),(0,r.jsx)(l.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.1},className:"p-6 border-b border-sidebar-border bg-muted/30",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(l.P.div,{whileHover:{scale:1.05},className:"w-12 h-12 bg-primary rounded-xl flex items-center justify-center font-bold text-primary-foreground shadow-md",children:(()=>{var e;if(null==u?void 0:u.fullname){let e=u.fullname.split(" ");return e.length>1?"".concat(e[0][0]).concat(e[1][0]).toUpperCase():u.fullname.slice(0,2).toUpperCase()}return(null==u||null==(e=u.email)?void 0:e.slice(0,2).toUpperCase())||"U"})()}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("h3",{className:"text-sm font-bold text-sidebar-foreground truncate",children:(null==u?void 0:u.fullname)||(null==u||null==(a=u.email)?void 0:a.split("@")[0])||"User"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground font-medium truncate",children:(o=null==u?void 0:u.role)?o.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "):"Unknown Role"})]})]})}),(0,r.jsx)("nav",{className:"flex-1 p-4 overflow-y-auto",children:(0,r.jsx)(l.P.div,{initial:"hidden",animate:"visible",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},className:"space-y-2",children:(h?v:k).map(e=>{let t=e.icon,a=c===e.href;return(0,r.jsx)(l.P.div,{variants:{hidden:{opacity:0,x:-20},visible:{opacity:1,x:0}},children:(0,r.jsxs)(i(),{href:e.href,className:"w-full flex items-center gap-3 px-4 py-3.5 rounded-xl transition-all duration-200 group ".concat(a?"bg-sidebar-accent text-sidebar-accent-foreground font-semibold shadow-sm border border-primary/20":"text-muted-foreground hover:bg-sidebar-accent/50 hover:text-sidebar-foreground"),children:[(0,r.jsx)("div",{className:"transition-transform duration-200 ".concat(a?"":"group-hover:scale-110"),children:(0,r.jsx)(t,{className:"w-5 h-5 ".concat(a?"text-primary":"")})}),(0,r.jsx)("span",{className:"text-sm font-medium",children:e.label}),a&&(0,r.jsx)(l.P.div,{layoutId:"activeIndicator",className:"ml-auto w-2 h-2 rounded-full bg-primary",transition:{type:"spring",stiffness:300,damping:30}})]})},e.href)})})}),(0,r.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},className:"p-4 border-t border-sidebar-border",children:(0,r.jsxs)(l.P.button,{onClick:d,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full flex items-center gap-3 px-4 py-3.5 rounded-xl text-muted-foreground hover:bg-destructive/10 hover:text-destructive transition-all duration-200 group border border-transparent hover:border-destructive/20",children:[(0,r.jsx)(y.A,{className:"w-5 h-5 transition-transform duration-200 group-hover:scale-110"}),(0,r.jsx)("span",{className:"text-sm font-semibold",children:"Logout"})]})})]})}},49730:(e,t,a)=>{a.d(t,{A:()=>h,AuthProvider:()=>u});var r=a(95155),s=a(12115),l=a(20063),n=a(18323),o=a(99776);function i(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:7,r=new Date(Date.now()+864e5*a).toUTCString();document.cookie="".concat(e,"=").concat(encodeURIComponent(t),"; expires=").concat(r,"; path=/; SameSite=Strict")}function d(e){document.cookie="".concat(e,"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; SameSite=Strict")}let c=(0,s.createContext)(void 0),u=e=>{let{children:t}=e,[a,u]=(0,s.useState)(null),[h,m]=(0,s.useState)(!0),p=(0,o.jE)(),x=(0,l.useRouter)();(0,s.useEffect)(()=>{let e=localStorage.getItem("user"),t=function(e){let t="; ".concat(document.cookie).split("; ".concat(e,"="));if(2===t.length){var a;return decodeURIComponent((null==(a=t.pop())?void 0:a.split(";").shift())||"")}return null}("token");e&&t&&u(JSON.parse(e)),m(!1)},[]);let g=async(e,t,a)=>{let r="admin"===a?await n.u.loginAdmin(e,t):await n.u.loginUser(e,t);console.log("Raw login response:",r);let s=r.user||r.admin,l={...s,token:r.token};u(l),localStorage.setItem("token",r.token),localStorage.setItem("user",JSON.stringify(l)),i("token",r.token,7);let o=null==s?void 0:s.role;switch(console.log("User role for routing:",o),i("role",o,7),o){case"lga_admin":default:x.push("/dashboard");break;case"super_admin":x.push("/admin/dashboard");break;case"state_admin":x.push("/state/dashboard")}},f=async e=>{let t=await n.u.registerSuperAdmin(e),a={...t.admin||t.newAdmin,token:t.token};u(a),localStorage.setItem("token",t.token),localStorage.setItem("user",JSON.stringify(a)),i("token",t.token,7),x.push("/admin/dashboard")},y=async e=>{await n.u.createUser(e)},b=async()=>{try{await n.u.logout()}catch(e){console.error("Error during server logout:",e)}try{localStorage.clear()}catch(e){console.error("Error clearing localStorage:",e),localStorage.removeItem("token"),localStorage.removeItem("user")}try{!function(){for(let e of document.cookie.split(";")){let t=e.indexOf("="),a=t>-1?e.substr(0,t).trim():e.trim();a&&(document.cookie="".concat(a,"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; SameSite=Strict"))}}()}catch(e){console.error("Error clearing cookies:",e),d("token"),d("role")}p.clear(),u(null);try{x.push("/login")}catch(e){window.location.href="/login"}};return(0,r.jsx)(c.Provider,{value:{user:a,loading:h,login:g,logout:b,registerSuperAdmin:f,createUser:async e=>await y(e)},children:t})},h=()=>{let e=(0,s.useContext)(c);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},71847:(e,t,a)=>{a.d(t,{A:()=>i});var r=a(12115);let s=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:d="",children:c,iconNode:u,...h}=e;return(0,r.createElement)("svg",{ref:t,...n,width:s,height:s,stroke:a,strokeWidth:i?24*Number(o)/Number(s):o,className:l("lucide",d),...!c&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(h)&&{"aria-hidden":"true"},...h},[...u.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(c)?c:[c]])}),i=(e,t)=>{let a=(0,r.forwardRef)((a,n)=>{let{className:i,...d}=a;return(0,r.createElement)(o,{ref:n,iconNode:t,className:l("lucide-".concat(s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),i),...d})});return a.displayName=s(e),a}},75882:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(71847).A)("wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]])},80534:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(71847).A)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},84926:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(71847).A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]])},89715:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(71847).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},91761:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(71847).A)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},93395:(e,t,a)=>{a.d(t,{A:()=>u});var r=a(95155),s=a(9540),l=a(86651);let n=(0,a(71847).A)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var o=a(24033),i=a(84926),d=a(49730),c=a(12115);function u(e){var t,a,u,h;let{onMenuClick:m,notificationCount:p=3}=e,{user:x,logout:g}=(0,d.A)(),[f,y]=(0,c.useState)(!1),b=(0,c.useRef)(null);console.log("Authenticated User:",x),(0,c.useEffect)(()=>{let e=e=>{b.current&&!b.current.contains(e.target)&&y(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let v=e=>e?e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "):"Unknown Role",k=(()=>{var e;if(!x)return{title:"Loading...",subtitle:"Please wait"};let t=null==(e=x.role)?void 0:e.toLowerCase();return(null==t?void 0:t.includes("super"))?{title:"Afrik Farm - Super Admin",subtitle:"All Regions â€¢ Pan-African"}:(null==t?void 0:t.includes("country"))?{title:"Country Administration",subtitle:"National Operations"}:(null==t?void 0:t.includes("state"))?{title:"State Administration",subtitle:"State Operations"}:(null==t?void 0:t.includes("lga"))?{title:"LGA Administration",subtitle:"Local Government Area"}:{title:x.fullname||"Dashboard",subtitle:v(x.role)}})();return(0,r.jsx)("header",{className:"sticky top-0 z-40 bg-white/80 backdrop-blur-md border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between px-6 py-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("button",{onClick:m,className:"lg:hidden p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,r.jsx)(s.A,{className:"w-5 h-5 text-gray-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:k.title}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:k.subtitle})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("div",{className:"relative hidden md:block",children:[(0,r.jsx)(l.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,r.jsx)("input",{type:"text",placeholder:"Search farmers, farms, loans...",className:"pl-10 pr-4 py-2 w-80 bg-gray-50 border border-gray-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all"})]}),(0,r.jsx)("button",{className:"p-2.5 hover:bg-gray-100 rounded-xl transition-colors",children:(0,r.jsx)(n,{className:"w-5 h-5 text-gray-600"})}),(0,r.jsxs)("div",{className:"hidden md:flex items-center gap-2 pl-3 border-l border-gray-200 relative",ref:b,children:[(0,r.jsxs)("button",{onClick:()=>y(!f),className:"flex items-center gap-2 hover:bg-gray-50 rounded-lg p-1.5 pr-2 transition-colors",children:[(0,r.jsx)("div",{className:"w-9 h-9 bg-primary rounded-lg flex items-center justify-center font-bold text-primary-foreground text-sm",children:(null==x||null==(t=x.fullname)?void 0:t.slice(0,2).toUpperCase())||(null==x||null==(a=x.email)?void 0:a.slice(0,2).toUpperCase())||"U"}),(0,r.jsxs)("div",{className:"text-left",children:[(0,r.jsx)("p",{className:"text-xs font-semibold text-gray-900 truncate max-w-[120px]",children:(null==x?void 0:x.fullname)||(null==x||null==(u=x.email)?void 0:u.split("@")[0])||"User"}),(0,r.jsx)("p",{className:"text-[10px] text-gray-500",children:(null==x?void 0:x.role)?v(x.role):"Loading..."})]}),(0,r.jsx)(o.A,{className:"w-4 h-4 text-gray-400 transition-transform ".concat(f?"rotate-180":"")})]}),f&&(0,r.jsxs)("div",{className:"absolute top-full right-0 mt-2 w-56 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-50",children:[(0,r.jsxs)("div",{className:"px-4 py-3 border-b border-gray-100",children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-gray-900 truncate",children:(null==x?void 0:x.fullname)||(null==x||null==(h=x.email)?void 0:h.split("@")[0])||"User"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 truncate",children:null==x?void 0:x.email}),(0,r.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:(null==x?void 0:x.role)?v(x.role):"Loading..."})]}),(0,r.jsxs)("button",{onClick:()=>{g(),y(!1)},className:"w-full flex items-center gap-3 px-4 py-2.5 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[(0,r.jsx)(i.A,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"font-medium",children:"Logout"})]})]})]})]})]})})}},96583:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(71847).A)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},99776:(e,t,a)=>{a.d(t,{Ht:()=>o,jE:()=>n});var r=a(12115),s=a(95155),l=r.createContext(void 0),n=e=>{let t=r.useContext(l);if(e)return e;if(!t)throw Error("No QueryClient set, use QueryClientProvider to set one");return t},o=e=>{let{client:t,children:a}=e;return r.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),(0,s.jsx)(l.Provider,{value:t,children:a})}}}]);