(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[214],{6132:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(71847).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},12862:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let r=t(95125).A.create({baseURL:"https://backend-api.afrikfarm.com/api/v1",headers:{"Content-Type":"application/json"}});r.interceptors.request.use(e=>{let a=localStorage.getItem("token");return a&&(e.headers.Authorization="Bearer ".concat(a)),e});let s=r},24958:(e,a,t)=>{"use strict";t.d(a,{z:()=>s});var r=t(12862);let s={getDashboard:async()=>(await r.A.get("/admin/dashboard")).data,createFarmer:async e=>(await r.A.post("/admin/create-farmer",e)).data,getFarmers:async()=>(await r.A.get("/admin/farmer/list-farmers")).data,getFarmerById:async e=>(await r.A.get("/admin/farmer/get-farmer?farmer_id=".concat(e))).data,sendCode:async e=>(await r.A.post("/admin/send-code",e)).data,verifyCode:async e=>(await r.A.post("/admin/verify-code",e)).data,verifyNin:async e=>(await r.A.post("/admin/verify-nin",e)).data,uploadProfileImage:async e=>(await r.A.post("/admin/upload-profile-image",e,{headers:{"Content-Type":"multipart/form-data"}})).data,UploadProofOfAddress:async e=>(await r.A.post("/admin/upload-proof-of-address",e,{headers:{"Content-Type":"multipart/form-data"}})).data,getBanks:async()=>(await r.A.get("/banks")).data,updateFarmer:async(e,a)=>(await r.A.put("/admin/farmer/update-farmer?id=".concat(e),a)).data,deleteFarmer:async e=>(await r.A.delete("/admin/farmers/".concat(e))).data,getFarms:async()=>(await r.A.get("/admin/farm/list-farms")).data,createFarm:async e=>(await r.A.post("/admin/farm/create-farm",e)).data,deleteFarm:async e=>(await r.A.delete("/admin/delete-farm?farm_id=".concat(e))).data,updateFarm:async(e,a)=>(await r.A.put("/admin/farm/update-farm?farm_id=".concat(e),a)).data,getFarmById:async e=>(await r.A.get("/admin/get-farm?farm_id=".concat(e))).data,getFarmersFarms:async e=>(await r.A.get("/admin/farmers-farms?farmer_id=".concat(e))).data,initializePayment:async e=>{console.log("=== PAYMENT INITIALIZATION DEBUG ==="),console.log("1. Data received by service:",e),console.log("2. Data stringified:",JSON.stringify(e));try{let a=await r.A.post("/admin/initialize-payment",e);return console.log("3. Full response received:",a),console.log("4. Response data:",a.data),a.data}catch(e){var a,t;throw console.error("4. Error caught in service:",e),console.error("5. Error response data:",null==(a=e.response)?void 0:a.data),console.error("6. Error request data:",null==(t=e.config)?void 0:t.data),e}},verifyPayment:async(e,a)=>(await r.A.get("/admin/verify-payment?trxref=".concat(e,"&reference=").concat(a))).data,getPaymentRevenue:async()=>(await r.A.get("/admin/payment/revenue")).data,listPayments:async()=>(await r.A.get("/admin/payment/list-payments")).data}},35299:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(71847).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},71847:(e,a,t)=>{"use strict";t.d(a,{A:()=>i});var r=t(12115);let s=e=>{let a=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,a,t)=>t?t.toUpperCase():a.toLowerCase());return a.charAt(0).toUpperCase()+a.slice(1)},n=function(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return a.filter((e,a,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===a).join(" ").trim()};var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,r.forwardRef)((e,a)=>{let{color:t="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:c="",children:o,iconNode:m,...x}=e;return(0,r.createElement)("svg",{ref:a,...d,width:s,height:s,stroke:t,strokeWidth:i?24*Number(l)/Number(s):l,className:n("lucide",c),...!o&&!(e=>{for(let a in e)if(a.startsWith("aria-")||"role"===a||"title"===a)return!0})(x)&&{"aria-hidden":"true"},...x},[...m.map(e=>{let[a,t]=e;return(0,r.createElement)(a,t)}),...Array.isArray(o)?o:[o]])}),i=(e,a)=>{let t=(0,r.forwardRef)((t,d)=>{let{className:i,...c}=t;return(0,r.createElement)(l,{ref:d,iconNode:a,className:n("lucide-".concat(s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),i),...c})});return t.displayName=s(e),t}},72066:(e,a,t)=>{Promise.resolve().then(t.bind(t,77658))},77658:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>c});var r=t(95155),s=t(12115),n=t(24958),d=t(35299),l=t(6132);let i=(0,t(71847).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);function c(){let[e,a]=(0,s.useState)(0),[t,c]=(0,s.useState)([]),[o,m]=(0,s.useState)({total:0,page:1,limit:50}),[x,p]=(0,s.useState)(!0),[y,h]=(0,s.useState)(null),[u,g]=(0,s.useState)(!1);(0,s.useEffect)(()=>{f()},[]);let f=async()=>{p(!0),h(null);try{let[e,t]=await Promise.all([n.z.getPaymentRevenue(),n.z.listPayments()]);a(e.data.totalRevenue),c(t.data),m(t.meta)}catch(a){var e,t;h((null==a||null==(t=a.response)||null==(e=t.data)?void 0:e.message)||"Failed to load data"),console.error("Fetch error:",a)}finally{p(!1)}},b=async()=>{g(!0),await f(),g(!1)},w=e=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(e);return x?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:(0,r.jsx)(d.A,{className:"w-12 h-12 animate-spin text-emerald-600"})}):y?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 p-4",children:(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-8 text-center max-w-md",children:[(0,r.jsx)(l.A,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-red-900 mb-2",children:"Failed to Load Data"}),(0,r.jsx)("p",{className:"text-sm text-red-600 mb-4",children:y}),(0,r.jsx)("button",{onClick:f,className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Try Again"})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Payments & Revenue"}),(0,r.jsx)("p",{className:"text-gray-500 mt-1",children:"Track all payment transactions and revenue"})]}),(0,r.jsxs)("button",{onClick:b,disabled:u,className:"flex items-center gap-2 px-4 py-2 bg-white border rounded-lg disabled:opacity-50",children:[(0,r.jsx)(i,{className:"w-4 h-4 ".concat(u?"animate-spin":"")}),"Refresh"]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-xl p-6 text-white shadow-lg",children:[(0,r.jsx)("p",{className:"text-emerald-100 text-sm mb-1",children:"Total Revenue"}),(0,r.jsx)("p",{className:"text-3xl font-bold",children:w(e)})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border",children:[(0,r.jsx)("p",{className:"text-gray-500 text-sm mb-1",children:"Total Transactions"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:o.total})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border",children:[(0,r.jsx)("p",{className:"text-gray-500 text-sm mb-1",children:"Average Payment"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:w(o.total?e/o.total:0)})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border",children:[(0,r.jsxs)("table",{className:"w-full text-sm",children:[(0,r.jsx)("thead",{className:"bg-gray-50 border-b",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs text-gray-500 uppercase",children:"Farmer"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs text-gray-500 uppercase",children:"Amount"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs text-gray-500 uppercase",children:"Phone"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs text-gray-500 uppercase",children:"Reference"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs text-gray-500 uppercase",children:"Status"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs text-gray-500 uppercase",children:"Date"})]})}),(0,r.jsx)("tbody",{className:"divide-y",children:t.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-6 py-4",children:e.farmer.fullname}),(0,r.jsx)("td",{className:"px-6 py-4 font-semibold",children:w(e.amount)}),(0,r.jsx)("td",{className:"px-6 py-4 font-mono",children:e.phone_number}),(0,r.jsx)("td",{className:"px-6 py-4 font-mono",children:e.payment_reference}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat((e=>{switch(e.toLowerCase()){case"paid":return"bg-green-100 text-green-700";case"pending":return"bg-amber-100 text-amber-700";case"failed":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}})(e.status)),children:e.status})}),(0,r.jsx)("td",{className:"px-6 py-4 text-gray-500",children:new Date(e.createdAt).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]},e.id))})]}),(0,r.jsxs)("div",{className:"px-6 py-4 bg-gray-50 border-t text-sm text-gray-500",children:["Showing ",t.length," of ",o.total," transactions"]})]})]})})}}},e=>{e.O(0,[125,441,255,358],()=>e(e.s=72066)),_N_E=e.O()}]);