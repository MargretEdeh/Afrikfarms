(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[894],{3472:(a,e,t)=>{Promise.resolve().then(t.bind(t,57054))},22033:(a,e,t)=>{"use strict";t.d(e,{AdminProvider:()=>i,z:()=>o});var r=t(95155),l=t(12115),n=t(24958);let s=(0,l.createContext)(void 0),i=a=>{let{children:e}=a,[t,i]=(0,l.useState)([]),[o,d]=(0,l.useState)([]),[c,u]=(0,l.useState)(null),[m,y]=(0,l.useState)(!1),[f,v]=(0,l.useState)(null),w=(0,l.useCallback)(()=>v(null),[]),h=(0,l.useCallback)(async()=>{y(!0),v(null);try{let a=await n.z.getDashboard();u(a.data||a)}catch(t){var a,e;throw v((null==(e=t.response)||null==(a=e.data)?void 0:a.message)||"Failed to fetch dashboard data"),t}finally{y(!1)}},[]),p=(0,l.useCallback)(async()=>{y(!0),v(null);try{let a=await n.z.getFarmers(),e=(null==a?void 0:a.data)||[];i(e)}catch(t){var a,e;throw v((null==(e=t.response)||null==(a=e.data)?void 0:a.message)||"Failed to fetch farmers"),t}finally{y(!1)}},[]),g=(0,l.useCallback)(async a=>{y(!0),v(null);try{let e=await n.z.getFarmerById(a);return e.farmer||e}catch(a){var e,t;throw v((null==(t=a.response)||null==(e=t.data)?void 0:e.message)||"Failed to fetch farmer"),a}finally{y(!1)}},[]),F=(0,l.useCallback)(async a=>{y(!0),v(null);try{let e=await n.z.createFarmer(a);return await p(),e}catch(a){var e,t;throw v((null==(t=a.response)||null==(e=t.data)?void 0:e.message)||"Failed to create farmer"),a}finally{y(!1)}},[p]),A=(0,l.useCallback)(async(a,e)=>{y(!0),v(null);try{await n.z.updateFarmer(a,e),await p()}catch(a){var t,r;throw v((null==(r=a.response)||null==(t=r.data)?void 0:t.message)||"Failed to update farmer"),a}finally{y(!1)}},[p]),b=(0,l.useCallback)(async a=>{y(!0),v(null);try{await n.z.deleteFarmer(a),i(e=>e.filter(e=>e.id!==a))}catch(a){var e,t;throw v((null==(t=a.response)||null==(e=t.data)?void 0:e.message)||"Failed to delete farmer"),a}finally{y(!1)}},[]),C=(0,l.useCallback)(async()=>{y(!0),v(null);try{let a=await n.z.getFarms(),e=a.data||a.farms||a||[];d(Array.isArray(e)?e:[])}catch(t){var a,e;throw v((null==(e=t.response)||null==(a=e.data)?void 0:a.message)||"Failed to fetch farms"),d([]),t}finally{y(!1)}},[]),k=(0,l.useCallback)(async a=>{y(!0),v(null);try{let e=await n.z.getFarmById(a);return e.farm||e}catch(a){var e,t;throw v((null==(t=a.response)||null==(e=t.data)?void 0:e.message)||"Failed to fetch farm"),a}finally{y(!1)}},[]),z=(0,l.useCallback)(async a=>{y(!0),v(null);try{let e=await n.z.getFarmersFarms(a);return e.farms||e}catch(a){var e,t;throw v((null==(t=a.response)||null==(e=t.data)?void 0:e.message)||"Failed to fetch farmer farms"),a}finally{y(!1)}},[]),x=(0,l.useCallback)(async a=>{y(!0),v(null);try{let e=await n.z.createFarm(a);return await C(),e}catch(a){var e,t;throw v((null==(t=a.response)||null==(e=t.data)?void 0:e.message)||"Failed to create farm"),a}finally{y(!1)}},[C]),N=(0,l.useCallback)(async(a,e)=>{y(!0),v(null);try{await n.z.updateFarm(a,e),await C()}catch(a){var t,r;throw v((null==(r=a.response)||null==(t=r.data)?void 0:t.message)||"Failed to update farm"),a}finally{y(!1)}},[C]),P=(0,l.useCallback)(async a=>{y(!0),v(null);try{await n.z.deleteFarm(a),d(e=>e.filter(e=>e.id!==a))}catch(a){var e,t;throw v((null==(t=a.response)||null==(e=t.data)?void 0:e.message)||"Failed to delete farm"),a}finally{y(!1)}},[]),S=(0,l.useCallback)(async a=>{y(!0),v(null);try{return await n.z.sendCode(a)}catch(a){var e,t;throw v((null==(t=a.response)||null==(e=t.data)?void 0:e.message)||"Failed to send code"),a}finally{y(!1)}},[]),I=(0,l.useCallback)(async a=>{y(!0),v(null);try{return await n.z.verifyCode(a)}catch(a){var e,t;throw v((null==(t=a.response)||null==(e=t.data)?void 0:e.message)||"Failed to verify code"),a}finally{y(!1)}},[]),_=(0,l.useCallback)(async a=>{y(!0),v(null);try{return await n.z.verifyNin(a)}catch(a){var e,t;throw v((null==(t=a.response)||null==(e=t.data)?void 0:e.message)||"Failed to verify NIN"),a}finally{y(!1)}},[]),j=(0,l.useCallback)(async a=>{y(!0),v(null);try{return await n.z.initializePayment(a)}catch(a){var e,t;throw v((null==(t=a.response)||null==(e=t.data)?void 0:e.message)||"Failed to initialize payment"),a}finally{y(!1)}},[]),E=(0,l.useCallback)(async(a,e)=>{y(!0),v(null);try{return await n.z.verifyPayment(a,e)}catch(a){var t,r;throw v((null==(r=a.response)||null==(t=r.data)?void 0:t.message)||"Failed to verify payment"),a}finally{y(!1)}},[]),T=(0,l.useCallback)(async()=>{y(!0),v(null);try{return await n.z.getPaymentRevenue()}catch(t){var a,e;throw v((null==(e=t.response)||null==(a=e.data)?void 0:a.message)||"Failed to fetch payment revenue"),t}finally{y(!1)}},[]),B=(0,l.useCallback)(async()=>{y(!0),v(null);try{return await n.z.listPayments()}catch(t){var a,e;throw v((null==(e=t.response)||null==(a=e.data)?void 0:a.message)||"Failed to fetch payments list"),t}finally{y(!1)}},[]);return(0,r.jsx)(s.Provider,{value:{farmers:t,farms:o,dashboard:c,loading:m,error:f,fetchDashboard:h,fetchFarmers:p,getFarmerById:g,createFarmer:F,updateFarmer:A,deleteFarmer:b,fetchFarms:C,getFarmById:k,getFarmersFarms:z,createFarm:x,updateFarm:N,deleteFarm:P,sendCode:S,verifyCode:I,verifyNin:_,initailizePayment:j,verifyPayment:E,getPaymentRevenue:T,listPayments:B,clearError:w},children:e})},o=()=>{let a=(0,l.useContext)(s);if(!a)throw Error("useAdmin must be used within an AdminProvider");return a}},24958:(a,e,t)=>{"use strict";t.d(e,{z:()=>l});var r=t(12862);let l={getDashboard:async()=>(await r.A.get("/admin/dashboard")).data,createFarmer:async a=>(await r.A.post("/admin/create-farmer",a)).data,getFarmers:async()=>(await r.A.get("/admin/farmer/list-farmers")).data,getFarmerById:async a=>(await r.A.get("/admin/farmer/get-farmer?farmer_id=".concat(a))).data,sendCode:async a=>(await r.A.post("/admin/send-code",a)).data,verifyCode:async a=>(await r.A.post("/admin/verify-code",a)).data,verifyNin:async a=>(await r.A.post("/admin/verify-nin",a)).data,uploadProfileImage:async a=>(await r.A.post("/admin/upload-profile-image",a,{headers:{"Content-Type":"multipart/form-data"}})).data,UploadProofOfAddress:async a=>(await r.A.post("/admin/upload-proof-of-address",a,{headers:{"Content-Type":"multipart/form-data"}})).data,getBanks:async()=>(await r.A.get("/banks")).data,updateFarmer:async(a,e)=>(await r.A.put("/admin/farmer/update-farmer?id=".concat(a),e)).data,deleteFarmer:async a=>(await r.A.delete("/admin/farmers/".concat(a))).data,getFarms:async()=>(await r.A.get("/admin/farm/list-farms")).data,createFarm:async a=>(await r.A.post("/admin/farm/create-farm",a)).data,deleteFarm:async a=>(await r.A.delete("/admin/delete-farm?farm_id=".concat(a))).data,updateFarm:async(a,e)=>(await r.A.put("/admin/farm/update-farm?farm_id=".concat(a),e)).data,getFarmById:async a=>(await r.A.get("/admin/get-farm?farm_id=".concat(a))).data,getFarmersFarms:async a=>(await r.A.get("/admin/farmers-farms?farmer_id=".concat(a))).data,initializePayment:async a=>{console.log("=== PAYMENT INITIALIZATION DEBUG ==="),console.log("1. Data received by service:",a),console.log("2. Data stringified:",JSON.stringify(a));try{let e=await r.A.post("/admin/initialize-payment",a);return console.log("3. Full response received:",e),console.log("4. Response data:",e.data),e.data}catch(a){var e,t;throw console.error("4. Error caught in service:",a),console.error("5. Error response data:",null==(e=a.response)?void 0:e.data),console.error("6. Error request data:",null==(t=a.config)?void 0:t.data),a}},verifyPayment:async(a,e)=>(await r.A.get("/admin/verify-payment?trxref=".concat(a,"&reference=").concat(e))).data,getPaymentRevenue:async()=>(await r.A.get("/admin/payment/revenue")).data,listPayments:async()=>(await r.A.get("/admin/payment/list-payments")).data}},57054:(a,e,t)=>{"use strict";t.r(e),t.d(e,{default:()=>o});var r=t(95155),l=t(12115),n=t(27543),s=t(93395),i=t(22033);function o(a){let{children:e}=a,[t,o]=(0,l.useState)(!1);return(0,r.jsx)(i.AdminProvider,{children:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden transition-opacity duration-300 ".concat(t?"opacity-100":"opacity-0 pointer-events-none"),onClick:()=>o(!1)}),(0,r.jsx)("div",{className:"fixed lg:sticky top-0 z-50 transition-transform duration-300 lg:translate-x-0 ".concat(t?"translate-x-0":"-translate-x-full"),children:(0,r.jsx)(n.A,{onLogout:()=>{confirm("Are you sure you want to logout?")&&((()=>{try{window.localStorage.clear(),window.sessionStorage.clear()}catch(a){}})(),(()=>{for(let a of document.cookie.split(";")){let e=a.indexOf("="),t=e>-1?a.substr(0,e).trim():a.trim();t&&(document.cookie="".concat(t,"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; SameSite=Strict"))}})(),window.location.href="/")}})}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col min-h-screen",children:[(0,r.jsx)(s.A,{onMenuClick:()=>o(!t),notificationCount:3}),(0,r.jsx)("main",{className:"flex-1 p-6 lg:p-8",children:e})]})]})})}}},a=>{a.O(0,[125,881,239,758,157,441,255,358],()=>a(a.s=3472)),_N_E=a.O()}]);