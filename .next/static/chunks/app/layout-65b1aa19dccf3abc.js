(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{11991:(a,e,t)=>{"use strict";t.d(e,{default:()=>s});var r=t(95155),l=t(99776);let n=new(t(17067)).E({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:!1}}});function s(a){let{children:e}=a;return(0,r.jsx)(l.Ht,{client:n,children:e})}},12862:(a,e,t)=>{"use strict";t.d(e,{A:()=>l});let r=t(95125).A.create({baseURL:"https://backend-api.afrikfarm.com/api/v1",headers:{"Content-Type":"application/json"}});r.interceptors.request.use(a=>{let e=localStorage.getItem("token");return e&&(a.headers.Authorization="Bearer ".concat(e)),a});let l=r},18323:(a,e,t)=>{"use strict";t.d(e,{u:()=>l});var r=t(12862);let l={loginAdmin:async(a,e)=>(await r.A.post("/auth/admin-login",{email:a,password:e})).data,loginUser:async(a,e)=>(await r.A.post("/auth/login",{login_id:a,password:e})).data,registerSuperAdmin:async a=>(await r.A.post("/auth/admin-register",a)).data,createUser:async a=>(await r.A.post("/admin/create-user",a)).data,getProfile:async()=>(await r.A.get("/auth/me")).data,getCountries:async()=>(await r.A.get("/admin/countries")).data,getStates:async()=>(await r.A.get("/admin/states")).data,getLgas:async()=>(await r.A.get("/admin/lgas")).data,logout:async()=>(await r.A.post("/auth/admin-logout")).data}},22033:(a,e,t)=>{"use strict";t.d(e,{AdminProvider:()=>o,z:()=>i});var r=t(95155),l=t(12115),n=t(24958);let s=(0,l.createContext)(void 0),o=a=>{let{children:e}=a,[t,o]=(0,l.useState)([]),[i,c]=(0,l.useState)([]),[d,u]=(0,l.useState)(null),[m,y]=(0,l.useState)(!1),[f,g]=(0,l.useState)(null),h=(0,l.useCallback)(()=>g(null),[]),w=(0,l.useCallback)(async()=>{y(!0),g(null);try{let a=await n.z.getDashboard();u(a.data||a)}catch(t){var a,e;throw g((null==(e=t.response)||null==(a=e.data)?void 0:a.message)||"Failed to fetch dashboard data"),t}finally{y(!1)}},[]),v=(0,l.useCallback)(async()=>{y(!0),g(null);try{let a=await n.z.getFarmers(),e=(null==a?void 0:a.data)||[];o(e)}catch(t){var a,e;throw g((null==(e=t.response)||null==(a=e.data)?void 0:a.message)||"Failed to fetch farmers"),t}finally{y(!1)}},[]),p=(0,l.useCallback)(async a=>{y(!0),g(null);try{let e=await n.z.getFarmerById(a);return e.farmer||e}catch(a){var e,t;throw g((null==(t=a.response)||null==(e=t.data)?void 0:e.message)||"Failed to fetch farmer"),a}finally{y(!1)}},[]),F=(0,l.useCallback)(async a=>{y(!0),g(null);try{let e=await n.z.createFarmer(a);return await v(),e}catch(a){var e,t;throw g((null==(t=a.response)||null==(e=t.data)?void 0:e.message)||"Failed to create farmer"),a}finally{y(!1)}},[v]),A=(0,l.useCallback)(async(a,e)=>{y(!0),g(null);try{await n.z.updateFarmer(a,e),await v()}catch(a){var t,r;throw g((null==(r=a.response)||null==(t=r.data)?void 0:t.message)||"Failed to update farmer"),a}finally{y(!1)}},[v]),b=(0,l.useCallback)(async a=>{y(!0),g(null);try{await n.z.deleteFarmer(a),o(e=>e.filter(e=>e.id!==a))}catch(a){var e,t;throw g((null==(t=a.response)||null==(e=t.data)?void 0:e.message)||"Failed to delete farmer"),a}finally{y(!1)}},[]),k=(0,l.useCallback)(async()=>{y(!0),g(null);try{let a=await n.z.getFarms(),e=a.data||a.farms||a||[];c(Array.isArray(e)?e:[])}catch(t){var a,e;throw g((null==(e=t.response)||null==(a=e.data)?void 0:a.message)||"Failed to fetch farms"),c([]),t}finally{y(!1)}},[]),C=(0,l.useCallback)(async a=>{y(!0),g(null);try{let e=await n.z.getFarmById(a);return e.farm||e}catch(a){var e,t;throw g((null==(t=a.response)||null==(e=t.data)?void 0:e.message)||"Failed to fetch farm"),a}finally{y(!1)}},[]),S=(0,l.useCallback)(async a=>{y(!0),g(null);try{let e=await n.z.getFarmersFarms(a);return e.farms||e}catch(a){var e,t;throw g((null==(t=a.response)||null==(e=t.data)?void 0:e.message)||"Failed to fetch farmer farms"),a}finally{y(!1)}},[]),_=(0,l.useCallback)(async a=>{y(!0),g(null);try{let e=await n.z.createFarm(a);return await k(),e}catch(a){var e,t;throw g((null==(t=a.response)||null==(e=t.data)?void 0:e.message)||"Failed to create farm"),a}finally{y(!1)}},[k]),P=(0,l.useCallback)(async(a,e)=>{y(!0),g(null);try{await n.z.updateFarm(a,e),await k()}catch(a){var t,r;throw g((null==(r=a.response)||null==(t=r.data)?void 0:t.message)||"Failed to update farm"),a}finally{y(!1)}},[k]),I=(0,l.useCallback)(async a=>{y(!0),g(null);try{await n.z.deleteFarm(a),c(e=>e.filter(e=>e.id!==a))}catch(a){var e,t;throw g((null==(t=a.response)||null==(e=t.data)?void 0:e.message)||"Failed to delete farm"),a}finally{y(!1)}},[]),z=(0,l.useCallback)(async a=>{y(!0),g(null);try{return await n.z.sendCode(a)}catch(a){var e,t;throw g((null==(t=a.response)||null==(e=t.data)?void 0:e.message)||"Failed to send code"),a}finally{y(!1)}},[]),N=(0,l.useCallback)(async a=>{y(!0),g(null);try{return await n.z.verifyCode(a)}catch(a){var e,t;throw g((null==(t=a.response)||null==(e=t.data)?void 0:e.message)||"Failed to verify code"),a}finally{y(!1)}},[]),E=(0,l.useCallback)(async a=>{y(!0),g(null);try{return await n.z.verifyNin(a)}catch(a){var e,t;throw g((null==(t=a.response)||null==(e=t.data)?void 0:e.message)||"Failed to verify NIN"),a}finally{y(!1)}},[]),x=(0,l.useCallback)(async a=>{y(!0),g(null);try{return await n.z.initializePayment(a)}catch(a){var e,t;throw g((null==(t=a.response)||null==(e=t.data)?void 0:e.message)||"Failed to initialize payment"),a}finally{y(!1)}},[]),T=(0,l.useCallback)(async(a,e)=>{y(!0),g(null);try{return await n.z.verifyPayment(a,e)}catch(a){var t,r;throw g((null==(r=a.response)||null==(t=r.data)?void 0:t.message)||"Failed to verify payment"),a}finally{y(!1)}},[]),U=(0,l.useCallback)(async()=>{y(!0),g(null);try{return await n.z.getPaymentRevenue()}catch(t){var a,e;throw g((null==(e=t.response)||null==(a=e.data)?void 0:a.message)||"Failed to fetch payment revenue"),t}finally{y(!1)}},[]),O=(0,l.useCallback)(async()=>{y(!0),g(null);try{return await n.z.listPayments()}catch(t){var a,e;throw g((null==(e=t.response)||null==(a=e.data)?void 0:a.message)||"Failed to fetch payments list"),t}finally{y(!1)}},[]);return(0,r.jsx)(s.Provider,{value:{farmers:t,farms:i,dashboard:d,loading:m,error:f,fetchDashboard:w,fetchFarmers:v,getFarmerById:p,createFarmer:F,updateFarmer:A,deleteFarmer:b,fetchFarms:k,getFarmById:C,getFarmersFarms:S,createFarm:_,updateFarm:P,deleteFarm:I,sendCode:z,verifyCode:N,verifyNin:E,initailizePayment:x,verifyPayment:T,getPaymentRevenue:U,listPayments:O,clearError:h},children:e})},i=()=>{let a=(0,l.useContext)(s);if(!a)throw Error("useAdmin must be used within an AdminProvider");return a}},24958:(a,e,t)=>{"use strict";t.d(e,{z:()=>l});var r=t(12862);let l={getDashboard:async()=>(await r.A.get("/admin/dashboard")).data,createFarmer:async a=>(await r.A.post("/admin/create-farmer",a)).data,getFarmers:async()=>(await r.A.get("/admin/farmer/list-farmers")).data,getFarmerById:async a=>(await r.A.get("/admin/farmer/get-farmer?farmer_id=".concat(a))).data,sendCode:async a=>(await r.A.post("/admin/send-code",a)).data,verifyCode:async a=>(await r.A.post("/admin/verify-code",a)).data,verifyNin:async a=>(await r.A.post("/admin/verify-nin",a)).data,uploadProfileImage:async a=>(await r.A.post("/admin/upload-profile-image",a,{headers:{"Content-Type":"multipart/form-data"}})).data,UploadProofOfAddress:async a=>(await r.A.post("/admin/upload-proof-of-address",a,{headers:{"Content-Type":"multipart/form-data"}})).data,getBanks:async()=>(await r.A.get("/banks")).data,updateFarmer:async(a,e)=>(await r.A.put("/admin/farmer/update-farmer?id=".concat(a),e)).data,deleteFarmer:async a=>(await r.A.delete("/admin/farmers/".concat(a))).data,getFarms:async()=>(await r.A.get("/admin/farm/list-farms")).data,createFarm:async a=>(await r.A.post("/admin/farm/create-farm",a)).data,deleteFarm:async a=>(await r.A.delete("/admin/delete-farm?farm_id=".concat(a))).data,updateFarm:async(a,e)=>(await r.A.put("/admin/farm/update-farm?farm_id=".concat(a),e)).data,getFarmById:async a=>(await r.A.get("/admin/get-farm?farm_id=".concat(a))).data,getFarmersFarms:async a=>(await r.A.get("/admin/farmers-farms?farmer_id=".concat(a))).data,initializePayment:async a=>{console.log("=== PAYMENT INITIALIZATION DEBUG ==="),console.log("1. Data received by service:",a),console.log("2. Data stringified:",JSON.stringify(a));try{let e=await r.A.post("/admin/initialize-payment",a);return console.log("3. Full response received:",e),console.log("4. Response data:",e.data),e.data}catch(a){var e,t;throw console.error("4. Error caught in service:",a),console.error("5. Error response data:",null==(e=a.response)?void 0:e.data),console.error("6. Error request data:",null==(t=a.config)?void 0:t.data),a}},verifyPayment:async(a,e)=>(await r.A.get("/admin/verify-payment?trxref=".concat(a,"&reference=").concat(e))).data,getPaymentRevenue:async()=>(await r.A.get("/admin/payment/revenue")).data,listPayments:async()=>(await r.A.get("/admin/payment/list-payments")).data}},41290:()=>{},48465:(a,e,t)=>{"use strict";t.d(e,{_:()=>l});var r=t(12862);let l={getDashboard:async()=>(await r.A.get("/lga/dashboard")).data,createFarmer:async a=>(await r.A.post("/lga/create-farmer",a)).data,getFarmers:async()=>(await r.A.get("/lga/farmers")).data,getFarmerById:async a=>(await r.A.get("/lga/farmers/".concat(a))).data,sendCode:async a=>(await r.A.post("/lga/send-code",a)).data,verifyCode:async a=>(await r.A.post("/lga/verify-code",a)).data,verifyNin:async a=>(await r.A.post("/lga/verify-nin",a)).data,uploadProfileImage:async(a,e)=>(await r.A.post("/lga/upload-profile-image",a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e})).data,UploadProofOfAddress:async(a,e)=>(await r.A.post("/lga/upload-proof-of-address",a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e})).data,getBanks:async()=>(await r.A.get("/banks")).data,getAccountName:async a=>(await r.A.get("/get-account-name",{params:{bank_code:a.bankCode,account_number:a.accountNumber}})).data,updateFarmer:async(a,e)=>(await r.A.put("/lga/farmers/".concat(a),e)).data,deleteFarmer:async a=>(await r.A.delete("/lga/farmers/".concat(a))).data,getFarms:async()=>(await r.A.get("/lga/farms")).data,createFarm:async a=>(await r.A.post("/lga/create-farm",a)).data,deleteFarm:async a=>(await r.A.delete("/lga/delete-farm?farm_id=".concat(a))).data,updateFarm:async(a,e)=>(await r.A.put("/lga/update-farm?farm_id=".concat(a),e)).data,getFarmById:async a=>(await r.A.get("/lga/get-farm?farm_id=".concat(a))).data,getFarmersFarms:async a=>(await r.A.get("/lga/farmers-farms?farmer_id=".concat(a))).data,initializePayment:async a=>{console.log("=== PAYMENT INITIALIZATION DEBUG ==="),console.log("1. Data received by service:",a),console.log("2. Data stringified:",JSON.stringify(a));try{let e=await r.A.post("/lga/initialize-payment",a);return console.log("3. Full response received:",e),console.log("4. Response data:",e.data),e.data}catch(a){var e,t;throw console.error("4. Error caught in service:",a),console.error("5. Error response data:",null==(e=a.response)?void 0:e.data),console.error("6. Error request data:",null==(t=a.config)?void 0:t.data),a}},verifyPayment:async(a,e)=>(await r.A.get("/lga/verify-payment?trxref=".concat(a,"&reference=").concat(e))).data}},49730:(a,e,t)=>{"use strict";t.d(e,{A:()=>m,AuthProvider:()=>u});var r=t(95155),l=t(12115),n=t(20063),s=t(18323),o=t(99776);function i(a,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:7,r=new Date(Date.now()+864e5*t).toUTCString();document.cookie="".concat(a,"=").concat(encodeURIComponent(e),"; expires=").concat(r,"; path=/; SameSite=Strict")}function c(a){document.cookie="".concat(a,"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; SameSite=Strict")}let d=(0,l.createContext)(void 0),u=a=>{let{children:e}=a,[t,u]=(0,l.useState)(null),[m,y]=(0,l.useState)(!0),f=(0,o.jE)(),g=(0,n.useRouter)();(0,l.useEffect)(()=>{let a=localStorage.getItem("user"),e=function(a){let e="; ".concat(document.cookie).split("; ".concat(a,"="));if(2===e.length){var t;return decodeURIComponent((null==(t=e.pop())?void 0:t.split(";").shift())||"")}return null}("token");a&&e&&u(JSON.parse(a)),y(!1)},[]);let h=async(a,e,t)=>{let r="admin"===t?await s.u.loginAdmin(a,e):await s.u.loginUser(a,e);console.log("Raw login response:",r);let l=r.user||r.admin,n={...l,token:r.token};u(n),localStorage.setItem("token",r.token),localStorage.setItem("user",JSON.stringify(n)),i("token",r.token,7);let o=null==l?void 0:l.role;switch(console.log("User role for routing:",o),i("role",o,7),o){case"lga_admin":default:g.push("/dashboard");break;case"super_admin":g.push("/admin/dashboard");break;case"state_admin":g.push("/state/dashboard")}},w=async a=>{let e=await s.u.registerSuperAdmin(a),t={...e.admin||e.newAdmin,token:e.token};u(t),localStorage.setItem("token",e.token),localStorage.setItem("user",JSON.stringify(t)),i("token",e.token,7),g.push("/admin/dashboard")},v=async a=>{await s.u.createUser(a)},p=async()=>{try{await s.u.logout()}catch(a){console.error("Error during server logout:",a)}try{localStorage.clear()}catch(a){console.error("Error clearing localStorage:",a),localStorage.removeItem("token"),localStorage.removeItem("user")}try{!function(){for(let a of document.cookie.split(";")){let e=a.indexOf("="),t=e>-1?a.substr(0,e).trim():a.trim();t&&(document.cookie="".concat(t,"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; SameSite=Strict"))}}()}catch(a){console.error("Error clearing cookies:",a),c("token"),c("role")}f.clear(),u(null);try{g.push("/login")}catch(a){window.location.href="/login"}};return(0,r.jsx)(d.Provider,{value:{user:t,loading:m,login:h,logout:p,registerSuperAdmin:w,createUser:async a=>await v(a)},children:e})},m=()=>{let a=(0,l.useContext)(d);if(!a)throw Error("useAuth must be used within an AuthProvider");return a}},69728:(a,e,t)=>{Promise.resolve().then(t.bind(t,22033)),Promise.resolve().then(t.bind(t,49730)),Promise.resolve().then(t.bind(t,92850)),Promise.resolve().then(t.t.bind(t,54587,23)),Promise.resolve().then(t.t.bind(t,24705,23)),Promise.resolve().then(t.t.bind(t,41290,23)),Promise.resolve().then(t.bind(t,11991))},92850:(a,e,t)=>{"use strict";t.d(e,{LGAProvider:()=>o,e:()=>i});var r=t(95155),l=t(12115),n=t(48465);let s=(0,l.createContext)(void 0),o=a=>{let{children:e}=a,[t,o]=(0,l.useState)([]),[i,c]=(0,l.useState)([]),[d,u]=(0,l.useState)(null),[m,y]=(0,l.useState)(!1),[f,g]=(0,l.useState)(null),h=(0,l.useCallback)(()=>g(null),[]),w=(0,l.useCallback)(async()=>{y(!0),g(null);try{let a=await n._.getDashboard();u(a)}catch(t){var a,e;throw g((null==(e=t.response)||null==(a=e.data)?void 0:a.message)||"Failed to fetch dashboard data"),t}finally{y(!1)}},[]),v=(0,l.useCallback)(async()=>{y(!0),g(null);try{let a=await n._.getFarmers(),e=(null==a?void 0:a.data)||[];o(e)}catch(t){var a,e;throw g((null==(e=t.response)||null==(a=e.data)?void 0:a.message)||"Failed to fetch farmers"),t}finally{y(!1)}},[]),p=(0,l.useCallback)(async a=>{y(!0),g(null);try{let e=await n._.getFarmerById(a);return e.farmer||e}catch(a){var e,t;throw g((null==(t=a.response)||null==(e=t.data)?void 0:e.message)||"Failed to fetch farmer"),a}finally{y(!1)}},[]),F=(0,l.useCallback)(async a=>{y(!0),g(null);try{let e=await n._.createFarmer(a);return await v(),e}catch(a){var e,t;throw g((null==(t=a.response)||null==(e=t.data)?void 0:e.message)||"Failed to create farmer"),a}finally{y(!1)}},[v]),A=(0,l.useCallback)(async(a,e)=>{y(!0),g(null);try{await n._.updateFarmer(a,e),await v()}catch(a){var t,r;throw g((null==(r=a.response)||null==(t=r.data)?void 0:t.message)||"Failed to update farmer"),a}finally{y(!1)}},[v]),b=(0,l.useCallback)(async a=>{y(!0),g(null);try{await n._.deleteFarmer(a),o(e=>e.filter(e=>e.id!==a))}catch(a){var e,t;throw g((null==(t=a.response)||null==(e=t.data)?void 0:e.message)||"Failed to delete farmer"),a}finally{y(!1)}},[]),k=(0,l.useCallback)(async()=>{y(!0),g(null);try{let a=await n._.getFarms(),e=a.data||a.farms||a||[];c(Array.isArray(e)?e:[])}catch(t){var a,e;throw g((null==(e=t.response)||null==(a=e.data)?void 0:a.message)||"Failed to fetch farms"),c([]),t}finally{y(!1)}},[]),C=(0,l.useCallback)(async a=>{y(!0),g(null);try{let e=await n._.getFarmById(a);return e.farm||e}catch(a){var e,t;throw g((null==(t=a.response)||null==(e=t.data)?void 0:e.message)||"Failed to fetch farm"),a}finally{y(!1)}},[]),S=(0,l.useCallback)(async a=>{y(!0),g(null);try{let e=await n._.getFarmersFarms(a);return e.farms||e}catch(a){var e,t;throw g((null==(t=a.response)||null==(e=t.data)?void 0:e.message)||"Failed to fetch farmer farms"),a}finally{y(!1)}},[]),_=(0,l.useCallback)(async a=>{y(!0),g(null);try{let e=await n._.createFarm(a);return await k(),e}catch(a){var e,t;throw g((null==(t=a.response)||null==(e=t.data)?void 0:e.message)||"Failed to create farm"),a}finally{y(!1)}},[k]),P=(0,l.useCallback)(async(a,e)=>{y(!0),g(null);try{await n._.updateFarm(a,e),await k()}catch(a){var t,r;throw g((null==(r=a.response)||null==(t=r.data)?void 0:t.message)||"Failed to update farm"),a}finally{y(!1)}},[k]),I=(0,l.useCallback)(async a=>{y(!0),g(null);try{await n._.deleteFarm(a),c(e=>e.filter(e=>e.id!==a))}catch(a){var e,t;throw g((null==(t=a.response)||null==(e=t.data)?void 0:e.message)||"Failed to delete farm"),a}finally{y(!1)}},[]),z=(0,l.useCallback)(async a=>{y(!0),g(null);try{return await n._.sendCode(a)}catch(a){var e,t;throw g((null==(t=a.response)||null==(e=t.data)?void 0:e.message)||"Failed to send code"),a}finally{y(!1)}},[]),N=(0,l.useCallback)(async a=>{y(!0),g(null);try{return await n._.verifyCode(a)}catch(a){var e,t;throw g((null==(t=a.response)||null==(e=t.data)?void 0:e.message)||"Failed to verify code"),a}finally{y(!1)}},[]),E=(0,l.useCallback)(async a=>{y(!0),g(null);try{return await n._.verifyNin(a)}catch(a){var e,t;throw g((null==(t=a.response)||null==(e=t.data)?void 0:e.message)||"Failed to verify NIN"),a}finally{y(!1)}},[]),x=(0,l.useCallback)(async a=>{y(!0),g(null);try{return await n._.initializePayment(a)}catch(a){var e,t;throw g((null==(t=a.response)||null==(e=t.data)?void 0:e.message)||"Failed to initialize payment"),a}finally{y(!1)}},[]),T=(0,l.useCallback)(async(a,e)=>{y(!0),g(null);try{return await n._.verifyPayment(a,e)}catch(a){var t,r;throw g((null==(r=a.response)||null==(t=r.data)?void 0:t.message)||"Failed to verify payment"),a}finally{y(!1)}},[]);return(0,r.jsx)(s.Provider,{value:{farmers:t,farms:i,dashboard:d,loading:m,error:f,fetchDashboard:w,fetchFarmers:v,getFarmerById:p,createFarmer:F,updateFarmer:A,deleteFarmer:b,fetchFarms:k,getFarmById:C,getFarmersFarms:S,createFarm:_,updateFarm:P,deleteFarm:I,sendCode:z,verifyCode:N,verifyNin:E,initailizePayment:x,verifyPayment:T,clearError:h},children:e})},i=()=>{let a=(0,l.useContext)(s);if(!a)throw Error("useLGA must be used within an LGAProvider");return a}}},a=>{a.O(0,[321,125,955,441,255,358],()=>a(a.s=69728)),_N_E=a.O()}]);