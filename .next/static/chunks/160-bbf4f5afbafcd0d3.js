"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[160],{12862:(e,a,t)=>{t.d(a,{A:()=>r});let s=t(95125).A.create({baseURL:"https://backend-api.afrikfarm.com/api/v1",headers:{"Content-Type":"application/json"}});s.interceptors.request.use(e=>{let a=localStorage.getItem("token");return a&&(e.headers.Authorization="Bearer ".concat(a)),e});let r=s},25016:(e,a,t)=>{t.d(a,{cn:()=>l});var s=t(2821),r=t(75889);function l(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,r.QP)((0,s.$)(a))}},33789:(e,a,t)=>{t.d(a,{p:()=>l});var s=t(95155);t(12115);var r=t(25016);function l(e){let{className:a,type:t,...l}=e;return(0,s.jsx)("input",{type:t,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...l})}},48465:(e,a,t)=>{t.d(a,{_:()=>r});var s=t(12862);let r={getDashboard:async()=>(await s.A.get("/lga/dashboard")).data,createFarmer:async e=>(await s.A.post("/lga/create-farmer",e)).data,getFarmers:async()=>(await s.A.get("/lga/farmers")).data,getFarmerById:async e=>(await s.A.get("/lga/farmers/".concat(e))).data,sendCode:async e=>(await s.A.post("/lga/send-code",e)).data,verifyCode:async e=>(await s.A.post("/lga/verify-code",e)).data,verifyNin:async e=>(await s.A.post("/lga/verify-nin",e)).data,uploadProfileImage:async(e,a)=>(await s.A.post("/lga/upload-profile-image",e,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:a})).data,UploadProofOfAddress:async(e,a)=>(await s.A.post("/lga/upload-proof-of-address",e,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:a})).data,getBanks:async()=>(await s.A.get("/banks")).data,getAccountName:async e=>(await s.A.get("/get-account-name",{params:{bank_code:e.bankCode,account_number:e.accountNumber}})).data,updateFarmer:async(e,a)=>(await s.A.put("/lga/farmers/".concat(e),a)).data,deleteFarmer:async e=>(await s.A.delete("/lga/farmers/".concat(e))).data,getFarms:async()=>(await s.A.get("/lga/farms")).data,createFarm:async e=>(await s.A.post("/lga/create-farm",e)).data,deleteFarm:async e=>(await s.A.delete("/lga/delete-farm?farm_id=".concat(e))).data,updateFarm:async(e,a)=>(await s.A.put("/lga/update-farm?farm_id=".concat(e),a)).data,getFarmById:async e=>(await s.A.get("/lga/get-farm?farm_id=".concat(e))).data,getFarmersFarms:async e=>(await s.A.get("/lga/farmers-farms?farmer_id=".concat(e))).data,initializePayment:async e=>{console.log("=== PAYMENT INITIALIZATION DEBUG ==="),console.log("1. Data received by service:",e),console.log("2. Data stringified:",JSON.stringify(e));try{let a=await s.A.post("/lga/initialize-payment",e);return console.log("3. Full response received:",a),console.log("4. Response data:",a.data),a.data}catch(e){var a,t;throw console.error("4. Error caught in service:",e),console.error("5. Error response data:",null==(a=e.response)?void 0:a.data),console.error("6. Error request data:",null==(t=e.config)?void 0:t.data),e}},verifyPayment:async(e,a)=>(await s.A.get("/lga/verify-payment?trxref=".concat(e,"&reference=").concat(a))).data}},54679:(e,a,t)=>{t.d(a,{Cf:()=>o,L3:()=>u,c7:()=>m,lG:()=>i});var s=t(95155);t(12115);var r=t(89511),l=t(65229),n=t(25016);function i(e){let{...a}=e;return(0,s.jsx)(r.bL,{"data-slot":"dialog",...a})}function d(e){let{...a}=e;return(0,s.jsx)(r.ZL,{"data-slot":"dialog-portal",...a})}function c(e){let{className:a,...t}=e;return(0,s.jsx)(r.hJ,{"data-slot":"dialog-overlay",className:(0,n.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...t})}function o(e){let{className:a,children:t,showCloseButton:i=!0,...o}=e;return(0,s.jsxs)(d,{"data-slot":"dialog-portal",children:[(0,s.jsx)(c,{}),(0,s.jsxs)(r.UC,{"data-slot":"dialog-content",className:(0,n.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...o,children:[t,i&&(0,s.jsxs)(r.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,s.jsx)(l.A,{}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function m(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"dialog-header",className:(0,n.cn)("flex flex-col gap-2 text-center sm:text-left",a),...t})}function u(e){let{className:a,...t}=e;return(0,s.jsx)(r.hE,{"data-slot":"dialog-title",className:(0,n.cn)("text-lg leading-none font-semibold",a),...t})}},68063:(e,a,t)=>{t.d(a,{A:()=>y});var s=t(95155),r=t(12115),l=t(5917),n=t(6132),i=t(35299),d=t(21786),c=t(54679),o=t(97003),m=t(33789),u=t(90235),x=t(38162),g=t(25016);function p(e){let{className:a,...t}=e;return(0,s.jsx)(x.bL,{"data-slot":"checkbox",className:(0,g.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...t,children:(0,s.jsx)(x.C1,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,s.jsx)(l.A,{className:"size-3.5"})})})}let h=(0,t(83101).F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function f(e){let{className:a,variant:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,g.cn)(h({variant:t}),a),...r})}function v(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"alert-description",className:(0,g.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",a),...t})}var b=t(48465);function y(e){let{open:a,onClose:t,onSubmit:x}=e,[g,h]=(0,r.useState)(1),[y,N]=(0,r.useState)(!1),[j,w]=(0,r.useState)(!1),[k,A]=(0,r.useState)(null),[C,F]=(0,r.useState)([]),[_,P]=(0,r.useState)({fullName:"",email:"",phone:"",acceptedTerms:!1,nin:"",address:"",state:"",lga:"",bankName:"",accountNumber:"",accountName:""}),[S,I]=(0,r.useState)(null),[O,L]=(0,r.useState)(null),[z,E]=(0,r.useState)(null),[J,R]=(0,r.useState)(null),[T,B]=(0,r.useState)(null),[D,U]=(0,r.useState)(null),[M,G]=(0,r.useState)(null),[K,$]=(0,r.useState)(null),[V,q]=(0,r.useState)(null),[W,Y]=(0,r.useState)(null),[Z,Q]=(0,r.useState)(!1),[X,H]=(0,r.useState)(null);(0,r.useEffect)(()=>{a&&ea()},[a]),(0,r.useEffect)(()=>{let e=_.bankName,a=_.accountNumber,t=!1;if(e&&a&&10===a.length){let s=C.find(a=>a.id.toString()===String(e)),r=null==s?void 0:s.code;if(!r)return void H("Selected bank code not available");Q(!0),H(null),(async()=>{var e,s,l,n,i;try{let n=await b._.getAccountName({bankCode:r,accountNumber:a});if(t)return;let i=(null==n?void 0:n.account_name)||(null==n?void 0:n.accountName)||(null==n?void 0:n.name)||(null==n||null==(e=n.data)?void 0:e.account_name)||(null==n||null==(l=n.data)||null==(s=l.data)?void 0:s.account_name)||null;i?ee("accountName",i):H("Account name not found")}catch(e){if(t)return;H((null==e||null==(i=e.response)||null==(n=i.data)?void 0:n.message)||"Failed to resolve account name")}finally{t||Q(!1)}})()}return()=>{t=!0}},[_.bankName,_.accountNumber]);let ee=(e,a)=>{P(t=>({...t,[e]:a})),A(null)},ea=async()=>{try{let e=await b._.getBanks();F((null==e?void 0:e.data)||[])}catch(e){console.error("Failed to fetch banks:",e)}},et=async()=>{if(!_.nin||11!==_.nin.length)return void A("Please enter a valid 11-digit NIN");N(!0),A(null);try{let e=await b._.verifyNin({nin:_.nin});w(!0),null==e||e.data}catch(t){var e,a;A((null==t||null==(a=t.response)||null==(e=a.data)?void 0:e.message)||"NIN verification failed. Please check the number and try again.")}finally{N(!1)}},es=async(e,a)=>{var t,s,r,l;N(!0),A(null);let n=URL.createObjectURL(a);"passportPhoto"===e?(I(n),E(a.type),B(a.name),G(0),q(null)):(L(n),R(a.type),U(a.name),$(0),Y(null));try{let r=new FormData;if("passportPhoto"===e){r.append("profile_image",a);let s=await b._.uploadProfileImage(r,e=>{try{if(e.lengthComputable){let a=Math.round(100*e.loaded/e.total);G(a)}}catch(e){}}),l=(null==s||null==(t=s.data)?void 0:t.image_url)||(null==s?void 0:s.image_url);l&&(ee(e,l),I(l),E(e=>e||"image/*"),B(e=>e||null)),setTimeout(()=>G(null),400)}else if("proofOfAddress"===e){r.append("proof_of_address",a);let t=await b._.UploadProofOfAddress(r,e=>{try{if(e.lengthComputable){let a=Math.round(100*e.loaded/e.total);$(a)}}catch(e){}}),l=(null==t||null==(s=t.data)?void 0:s.image_url)||(null==t?void 0:t.image_url);l&&(ee(e,l),L(l),R(e=>e||"image/*"),U(e=>e||null)),setTimeout(()=>$(null),400)}}catch(t){let a=(null==t||null==(l=t.response)||null==(r=l.data)?void 0:r.message)||"Failed to upload ".concat("passportPhoto"===e?"photo":"document",". Please try again.");A(a),"passportPhoto"===e?(q(a),G(null)):(Y(a),$(null)),n&&URL.revokeObjectURL(n),"passportPhoto"===e?I(null):L(null)}finally{N(!1)}},er=async()=>{if(!_.nin||!_.address||!_.state||!_.lga||!_.bankName||!_.accountNumber||!_.accountName)return void A("Please fill in all required fields");if(!j)return void A("Please verify your NIN first");if(_.accountNumber&&10!==_.accountNumber.length)return void A("Account number must be 10 digits");N(!0),A(null);try{let e={fullname:_.fullName,email:_.email||null,phone_number:_.phone,nin:_.nin,nin_verified:j,address:_.address,state:_.state,lga:_.lga,bankId:parseInt(_.bankName),account_name:_.accountName,account_number:_.accountNumber,profile_image:_.passportPhoto||"noimage.jpg",proof_of_address:_.proofOfAddress||"noimage.jpg"};console.log("Submitting farmer data:",e),await b._.createFarmer(e),await x(_),el()}catch(t){var e,a;A((null==t||null==(a=t.response)||null==(e=a.data)?void 0:e.message)||"Failed to register farmer. Please try again.")}finally{N(!1)}},el=()=>{var e,a;if(h(1),w(!1),A(null),P({fullName:"",email:"",phone:"",acceptedTerms:!1,nin:"",address:"",state:"",lga:"",bankName:"",accountNumber:"",accountName:""}),S&&(null==(e=S.startsWith)?void 0:e.call(S,"blob:")))try{URL.revokeObjectURL(S)}catch(e){}if(O&&(null==(a=O.startsWith)?void 0:a.call(O,"blob:")))try{URL.revokeObjectURL(O)}catch(e){}I(null),L(null),t()};return(0,s.jsx)(c.lG,{open:a,onOpenChange:el,children:(0,s.jsxs)(c.Cf,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)(c.c7,{children:[(0,s.jsx)(c.L3,{className:"text-2xl font-bold text-gray-900",children:"Register New Farmer"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 ".concat(g>=1?"text-emerald-600":"text-gray-400"),children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center font-semibold ".concat(g>=1?"bg-primary text-white":"bg-gray-200 text-gray-600"),children:g>1?(0,s.jsx)(l.A,{className:"w-5 h-5"}):"1"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Basic Details"})]}),(0,s.jsx)("div",{className:"flex-1 h-0.5 bg-gray-200 mx-2",children:(0,s.jsx)("div",{className:"h-full transition-all ".concat(g>=2?"bg-primary w-full":"w-0")})}),(0,s.jsxs)("div",{className:"flex items-center gap-2 ".concat(g>=2?"text-emerald-600":"text-gray-400"),children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center font-semibold ".concat(g>=2?"bg-primary text-white":"bg-gray-200 text-gray-600"),children:"2"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"KYC Verification"})]})]})]}),k&&(0,s.jsxs)(f,{variant:"destructive",children:[(0,s.jsx)(n.A,{className:"h-4 w-4"}),(0,s.jsx)(v,{children:k})]}),1===g&&(0,s.jsxs)("div",{className:"space-y-6 py-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(u.J,{htmlFor:"fullName",children:["Full Name ",(0,s.jsx)("span",{className:"text-red-500",children:"*"}),(0,s.jsx)("span",{className:"text-xs text-gray-500 ml-2",children:"(as on NIN)"})]}),(0,s.jsx)(m.p,{id:"fullName",placeholder:"Enter full name",value:_.fullName,onChange:e=>ee("fullName",e.target.value)})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u.J,{htmlFor:"email",children:"Email Address"}),(0,s.jsx)(m.p,{id:"email",type:"email",placeholder:"farmer@example.com",value:_.email,onChange:e=>ee("email",e.target.value)})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(u.J,{htmlFor:"phone",children:["Phone Number ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsx)(m.p,{id:"phone",placeholder:"+234 800 000 0000",value:_.phone,onChange:e=>ee("phone",e.target.value)})})]}),(0,s.jsxs)("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[(0,s.jsx)(p,{id:"terms",checked:_.acceptedTerms,onCheckedChange:e=>ee("acceptedTerms",e)}),(0,s.jsx)("div",{className:"space-y-1",children:(0,s.jsxs)(u.J,{htmlFor:"terms",className:"text-sm font-normal cursor-pointer",children:["I accept the"," ",(0,s.jsx)("a",{href:"#",className:"text-emerald-600 hover:underline",children:"Terms & Conditions"})," ","and"," ",(0,s.jsx)("a",{href:"#",className:"text-emerald-600 hover:underline",children:"Privacy Policy"})]})})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,s.jsx)(o.$,{variant:"outline",onClick:el,children:"Cancel"}),(0,s.jsx)(o.$,{onClick:()=>_.fullName&&_.phone?_.acceptedTerms?void(h(2),A(null)):void A("Please accept the Terms & Conditions"):void A("Please fill in all required fields (Full Name and Phone Number)"),disabled:!_.fullName||!_.phone||!_.acceptedTerms,className:"bg-primary hover:bg-emerald-700",children:"Continue to KYC"})]})]}),2===g&&(0,s.jsxs)("div",{className:"space-y-6 py-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(u.J,{htmlFor:"nin",children:["National Identification Number (NIN) ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(m.p,{id:"nin",placeholder:"12345678901",maxLength:11,value:_.nin,onChange:e=>ee("nin",e.target.value.replace(/\D/g,"")),disabled:j}),!j&&(0,s.jsx)(o.$,{onClick:et,disabled:y||!_.nin||11!==_.nin.length,variant:"outline",children:y?(0,s.jsx)(i.A,{className:"w-4 h-4 animate-spin"}):"Verify NIN"}),j&&(0,s.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 bg-emerald-50 text-emerald-700 rounded-lg",children:[(0,s.jsx)(l.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Verified"})]})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"We'll validate your identity with NIMC database"})]}),j&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u.J,{htmlFor:"passport",children:"Passport Photograph"}),(0,s.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-emerald-500 transition-colors cursor-pointer",children:[(0,s.jsx)("input",{type:"file",id:"passport",accept:"image/*",className:"hidden",onChange:e=>{var a;return(null==(a=e.target.files)?void 0:a[0])&&es("passportPhoto",e.target.files[0])}}),(0,s.jsx)("label",{htmlFor:"passport",className:"cursor-pointer",children:S?(0,s.jsxs)("div",{children:[(0,s.jsx)("img",{src:S,alt:"Passport preview",className:"mx-auto mb-2 w-28 h-28 object-cover rounded-full"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Change photo"}),null!==M&&(0,s.jsx)("div",{className:"mt-3 w-full bg-gray-200 rounded h-2 overflow-hidden",children:(0,s.jsx)("div",{className:"h-2 transition-all ".concat(V?"bg-red-500":"bg-emerald-600"),style:{width:"".concat(M,"%")}})}),V&&(0,s.jsx)("p",{className:"text-xs text-red-600 mt-2",children:V})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.A,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Click to upload or drag and drop"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG up to 5MB"})]})})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(u.J,{htmlFor:"address",children:["Full Address ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)(m.p,{id:"address",placeholder:"Enter full residential address",value:_.address,onChange:e=>ee("address",e.target.value)})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(u.J,{htmlFor:"state",children:["State ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{id:"state",value:_.state,onChange:e=>ee("state",e.target.value),className:"w-full px-3 py-2 bg-white border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500",children:[(0,s.jsx)("option",{value:"",children:"Select State"}),["Abia","Adamawa","Akwa Ibom","Anambra","Bauchi","Bayelsa","Benue","Borno","Cross River","Delta","Ebonyi","Edo","Ekiti","Enugu","FCT","Gombe","Imo","Jigawa","Kaduna","Kano","Katsina","Kebbi","Kogi","Kwara","Lagos","Nasarawa","Niger","Ogun","Ondo","Osun","Oyo","Plateau","Rivers","Sokoto","Taraba","Yobe","Zamfara"].map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(u.J,{htmlFor:"lga",children:["LGA ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)(m.p,{id:"lga",placeholder:"Enter LGA",value:_.lga,onChange:e=>ee("lga",e.target.value)})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u.J,{htmlFor:"proofOfAddress",children:"Proof of Address (Optional)"}),(0,s.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-emerald-500 transition-colors cursor-pointer",children:[(0,s.jsx)("input",{type:"file",id:"proofOfAddress",accept:"image/*,.pdf",className:"hidden",onChange:e=>{var a;return(null==(a=e.target.files)?void 0:a[0])&&es("proofOfAddress",e.target.files[0])}}),(0,s.jsx)("label",{htmlFor:"proofOfAddress",className:"cursor-pointer",children:O?J&&J.startsWith("image")?(0,s.jsxs)("div",{children:[(0,s.jsx)("img",{src:O,alt:"Proof preview",className:"mx-auto mb-2 w-36 h-24 object-contain rounded"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Change document"}),null!==K&&(0,s.jsx)("div",{className:"mt-3 w-full bg-gray-200 rounded h-2 overflow-hidden",children:(0,s.jsx)("div",{className:"h-2 transition-all ".concat(W?"bg-red-500":"bg-emerald-600"),style:{width:"".concat(K,"%")}})}),W&&(0,s.jsx)("p",{className:"text-xs text-red-600 mt-2",children:W})]}):(0,s.jsxs)("div",{className:"mx-auto mb-2 w-full flex flex-col items-center",children:[(0,s.jsx)("div",{className:"px-3 py-2 bg-gray-100 rounded text-sm text-gray-700",children:"Uploaded document"}),D&&(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:D}),null!==K&&(0,s.jsx)("div",{className:"mt-3 w-full bg-gray-200 rounded h-2 overflow-hidden",children:(0,s.jsx)("div",{className:"h-2 transition-all ".concat(W?"bg-red-500":"bg-emerald-600"),style:{width:"".concat(K,"%")}})}),W&&(0,s.jsx)("p",{className:"text-xs text-red-600 mt-2",children:W})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.A,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Click to upload utility bill or bank statement"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"PDF, PNG, JPG up to 5MB"})]})})]})]}),(0,s.jsxs)("div",{className:"pt-4 border-t border-gray-200",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Bank Account Details"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(u.J,{htmlFor:"bankName",children:["Bank Name ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{id:"bankName",value:_.bankName,onChange:e=>ee("bankName",e.target.value),className:"w-full px-3 py-2 bg-white border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500",children:[(0,s.jsx)("option",{value:"",children:"Select Bank"}),C.map(e=>(0,s.jsx)("option",{value:e.id.toString(),children:e.name},e.id))]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(u.J,{htmlFor:"accountNumber",children:["Account Number ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)(m.p,{id:"accountNumber",placeholder:"0123456789",maxLength:10,value:_.accountNumber,onChange:e=>ee("accountNumber",e.target.value.replace(/\D/g,""))}),Z?(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Resolving account name..."}):X?(0,s.jsx)("p",{className:"text-xs text-red-600 mt-1",children:X}):_.accountName?(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Resolved name: ",_.accountName]}):null]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(u.J,{htmlFor:"accountName",children:["Account Name ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)(m.p,{id:"accountName",placeholder:"Account name will be auto-filled",value:_.accountName,readOnly:!0}),_.accountName?(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Auto-filled from bank lookup (read-only)"}):(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Must match the name on your bank account"})]})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-between gap-3 pt-4",children:[(0,s.jsx)(o.$,{variant:"outline",onClick:()=>h(1),children:"Back"}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(o.$,{variant:"outline",onClick:el,children:"Cancel"}),(0,s.jsx)(o.$,{onClick:er,disabled:y||!j||!_.address||!_.state||!_.lga||!_.bankName||!_.accountNumber||!_.accountName,className:"bg-primary hover:bg-emerald-700",children:y?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.A,{className:"w-4 h-4 animate-spin mr-2"}),"Registering..."]}):"Complete Registration"})]})]})]})]})})}},83685:(e,a,t)=>{t.d(a,{A:()=>m});var s=t(95155),r=t(12115),l=t(69141),n=t(23664),i=t(57828),d=t(11010),c=t(90368),o=t(27937);function m(e){let{farmers:a,onView:t,onEdit:m}=e,[u,x]=(0,r.useState)(1),g=Math.ceil(a.length/10),p=(u-1)*10,h=p+10,f=a.slice(p,h);return(0,s.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-100 overflow-hidden",children:[(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-50 border-b border-gray-100",children:[(0,s.jsx)("th",{className:"text-left py-4 px-6 text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Farmer ID"}),(0,s.jsx)("th",{className:"text-left py-4 px-6 text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Name"}),(0,s.jsx)("th",{className:"text-left py-4 px-6 text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Contact"}),(0,s.jsx)("th",{className:"text-left py-4 px-6 text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Farm Size"}),(0,s.jsx)("th",{className:"text-left py-4 px-6 text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Registration"}),(0,s.jsx)("th",{className:"text-left py-4 px-6 text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Status"}),(0,s.jsx)("th",{className:"text-left py-4 px-6 text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-100",children:f.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,s.jsx)("td",{className:"py-4 px-6 text-sm font-mono text-gray-900",children:e.id}),(0,s.jsx)("td",{className:"py-4 px-6",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-primary to-emerald-500 rounded-full flex items-center justify-center text-white font-semibold text-sm",children:e.name.split(" ").map(e=>e[0]).join("")}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.name})]})}),(0,s.jsx)("td",{className:"py-4 px-6",children:(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,s.jsx)(l.A,{className:"w-3.5 h-3.5"}),e.phone]}),e.email&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,s.jsx)(n.A,{className:"w-3.5 h-3.5"}),e.email]})]})}),(0,s.jsx)("td",{className:"py-4 px-6 text-sm text-gray-900",children:e.farmSize}),(0,s.jsx)("td",{className:"py-4 px-6 text-sm text-gray-600",children:e.registrationDate}),(0,s.jsx)("td",{className:"py-4 px-6",children:(0,s.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ".concat((e=>{switch(e){case"active":return"bg-primary text-primary-foreground";case"pending":return"bg-amber-100 text-amber-700";case"inactive":default:return"bg-gray-100 text-gray-700";case"suspended":return"bg-red-100 text-red-700"}})(e.status)),children:e.status})}),(0,s.jsx)("td",{className:"py-4 px-6",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>t(e),className:"p-2 hover:bg-primary/10 text-gray-600 hover:text-primary rounded-lg transition-colors",title:"View Details",children:(0,s.jsx)(i.A,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>m(e),className:"p-2 hover:bg-blue-50 text-gray-600 hover:text-blue-600 rounded-lg transition-colors",title:"Edit",children:(0,s.jsx)(d.A,{className:"w-4 h-4"})})]})})]},e.id))})]})}),g>1&&(0,s.jsxs)("div",{className:"px-6 py-4 border-t border-gray-100 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",p+1," to ",Math.min(h,a.length)," of ",a.length," farmers"]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>{u>1&&x(u-1)},disabled:1===u,className:"p-2 rounded-lg border border-gray-200 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Previous page",children:(0,s.jsx)(c.A,{className:"w-4 h-4"})}),(0,s.jsx)("div",{className:"flex items-center gap-1",children:(()=>{let e=[];if(g<=5)for(let a=1;a<=g;a++)e.push(a);else if(u<=3){for(let a=1;a<=4;a++)e.push(a);e.push("..."),e.push(g)}else if(u>=g-2){e.push(1),e.push("...");for(let a=g-3;a<=g;a++)e.push(a)}else{e.push(1),e.push("...");for(let a=u-1;a<=u+1;a++)e.push(a);e.push("..."),e.push(g)}return e})().map((e,a)=>"..."===e?(0,s.jsx)("span",{className:"px-3 py-2 text-gray-400",children:"..."},"ellipsis-".concat(a)):(0,s.jsx)("button",{onClick:()=>{x(Math.max(1,Math.min(e,g)))},className:"px-3 py-2 rounded-lg text-sm font-medium transition-colors ".concat(u===e?"bg-primary text-white":"text-gray-600 hover:bg-gray-100"),children:e},e))}),(0,s.jsx)("button",{onClick:()=>{u<g&&x(u+1)},disabled:u===g,className:"p-2 rounded-lg border border-gray-200 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Next page",children:(0,s.jsx)(o.A,{className:"w-4 h-4"})})]})]})]})}},90235:(e,a,t)=>{t.d(a,{J:()=>n});var s=t(95155);t(12115);var r=t(10489),l=t(25016);function n(e){let{className:a,...t}=e;return(0,s.jsx)(r.b,{"data-slot":"label",className:(0,l.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...t})}},97003:(e,a,t)=>{t.d(a,{$:()=>d});var s=t(95155);t(12115);var r=t(32467),l=t(83101),n=t(25016);let i=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function d(e){let{className:a,variant:t,size:l,asChild:d=!1,...c}=e,o=d?r.DX:"button";return(0,s.jsx)(o,{"data-slot":"button",className:(0,n.cn)(i({variant:t,size:l,className:a})),...c})}}}]);