(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,46897,e=>{"use strict";e.s(["MapPin",()=>a],46897);let a=(0,e.i(75254).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},41947,e=>{"use strict";e.s(["default",()=>a]);let a=(0,e.i(75254).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},37727,e=>{"use strict";e.s(["X",()=>a.default]);var a=e.i(41947)},7670,e=>{"use strict";function a(){for(var e,a,r=0,s="",t=arguments.length;r<t;r++)(e=arguments[r])&&(a=function e(a){var r,s,t="";if("string"==typeof a||"number"==typeof a)t+=a;else if("object"==typeof a)if(Array.isArray(a)){var l=a.length;for(r=0;r<l;r++)a[r]&&(s=e(a[r]))&&(t&&(t+=" "),t+=s)}else for(s in a)a[s]&&(t&&(t+=" "),t+=s);return t}(e))&&(s&&(s+=" "),s+=a);return s}e.s(["clsx",()=>a])},67881,20783,91918,25913,e=>{"use strict";e.s(["Button",()=>g],67881);var a=e.i(43476);e.s(["Slot",()=>i,"createSlot",()=>n],91918);var r=e.i(71645);function s(e,a){if("function"==typeof e)return e(a);null!=e&&(e.current=a)}function t(){for(var e=arguments.length,a=Array(e),r=0;r<e;r++)a[r]=arguments[r];return e=>{let r=!1,t=a.map(a=>{let t=s(a,e);return r||"function"!=typeof t||(r=!0),t});if(r)return()=>{for(let e=0;e<t.length;e++){let r=t[e];"function"==typeof r?r():s(a[e],null)}}}}function l(){for(var e=arguments.length,a=Array(e),s=0;s<e;s++)a[s]=arguments[s];return r.useCallback(t(...a),a)}function n(e){let s=function(e){let a=r.forwardRef((e,a)=>{let{children:s,...l}=e;if(r.isValidElement(s)){var n,i,d;let e,c,o=(c=(e=null==(i=Object.getOwnPropertyDescriptor((n=s).props,"ref"))?void 0:i.get)&&"isReactWarning"in e&&e.isReactWarning)?n.ref:(c=(e=null==(d=Object.getOwnPropertyDescriptor(n,"ref"))?void 0:d.get)&&"isReactWarning"in e&&e.isReactWarning)?n.props.ref:n.props.ref||n.ref,m=function(e,a){let r={...a};for(let s in a){let t=e[s],l=a[s];/^on[A-Z]/.test(s)?t&&l?r[s]=function(){for(var e=arguments.length,a=Array(e),r=0;r<e;r++)a[r]=arguments[r];let s=l(...a);return t(...a),s}:t&&(r[s]=t):"style"===s?r[s]={...t,...l}:"className"===s&&(r[s]=[t,l].filter(Boolean).join(" "))}return{...e,...r}}(l,s.props);return s.type!==r.Fragment&&(m.ref=a?t(a,o):o),r.cloneElement(s,m)}return r.Children.count(s)>1?r.Children.only(null):null});return a.displayName="".concat(e,".SlotClone"),a}(e),l=r.forwardRef((e,t)=>{let{children:l,...n}=e,i=r.Children.toArray(l),d=i.find(c);if(d){let e=d.props.children,l=i.map(a=>a!==d?a:r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null);return(0,a.jsx)(s,{...n,ref:t,children:r.isValidElement(e)?r.cloneElement(e,void 0,l):null})}return(0,a.jsx)(s,{...n,ref:t,children:l})});return l.displayName="".concat(e,".Slot"),l}e.s(["composeRefs",()=>t,"useComposedRefs",()=>l],20783);var i=n("Slot"),d=Symbol("radix.slottable");function c(e){return r.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===d}e.s(["cva",()=>x],25913);var o=e.i(7670);let m=e=>"boolean"==typeof e?"".concat(e):0===e?"0":e,u=o.clsx,x=(e,a)=>r=>{var s;if((null==a?void 0:a.variants)==null)return u(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:t,defaultVariants:l}=a,n=Object.keys(t).map(e=>{let a=null==r?void 0:r[e],s=null==l?void 0:l[e];if(null===a)return null;let n=m(a)||m(s);return t[e][n]}),i=r&&Object.entries(r).reduce((e,a)=>{let[r,s]=a;return void 0===s||(e[r]=s),e},{});return u(e,n,null==a||null==(s=a.compoundVariants)?void 0:s.reduce((e,a)=>{let{class:r,className:s,...t}=a;return Object.entries(t).every(e=>{let[a,r]=e;return Array.isArray(r)?r.includes({...l,...i}[a]):({...l,...i})[a]===r})?[...e,r,s]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)};var h=e.i(47163);let p=x("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function g(e){let{className:r,variant:s,size:t,asChild:l=!1,...n}=e;return(0,a.jsx)(l?i:"button",{"data-slot":"button",className:(0,h.cn)(p({variant:s,size:t,className:r})),...n})}},48425,e=>{"use strict";e.s(["Primitive",()=>l,"dispatchDiscreteCustomEvent",()=>n]);var a=e.i(71645),r=e.i(74080),s=e.i(91918),t=e.i(43476),l=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,r)=>{let l=(0,s.createSlot)("Primitive.".concat(r)),n=a.forwardRef((e,a)=>{let{asChild:s,...n}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(s?l:r,{...n,ref:a})});return n.displayName="Primitive.".concat(r),{...e,[r]:n}},{});function n(e,a){e&&r.flushSync(()=>e.dispatchEvent(a))}},23750,e=>{"use strict";e.s(["Input",()=>s]);var a=e.i(43476),r=e.i(47163);function s(e){let{className:s,type:t,...l}=e;return(0,a.jsx)("input",{type:t,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...l})}},10708,e=>{"use strict";e.s(["Label",()=>n],10708);var a=e.i(43476),r=e.i(71645),s=e.i(48425),t=r.forwardRef((e,r)=>(0,a.jsx)(s.Primitive.label,{...e,ref:r,onMouseDown:a=>{var r;a.target.closest("button, input, select, textarea")||(null==(r=e.onMouseDown)||r.call(e,a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));t.displayName="Label";var l=e.i(47163);function n(e){let{className:r,...s}=e;return(0,a.jsx)(t,{"data-slot":"label",className:(0,l.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",r),...s})}},78784,78745,e=>{"use strict";e.s(["CheckIcon",()=>a],78784),e.s(["default",()=>a],78745);let a=(0,e.i(75254).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},73884,e=>{"use strict";e.s(["XCircle",()=>a],73884);let a=(0,e.i(75254).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},61659,e=>{"use strict";e.s(["CreditCard",()=>a],61659);let a=(0,e.i(75254).default)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},63488,e=>{"use strict";e.s(["Mail",()=>a],63488);let a=(0,e.i(75254).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},69074,e=>{"use strict";e.s(["Upload",()=>a],69074);let a=(0,e.i(75254).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},43432,e=>{"use strict";e.s(["Phone",()=>a],43432);let a=(0,e.i(75254).default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]])},69638,e=>{"use strict";e.s(["CheckCircle",()=>a],69638);let a=(0,e.i(75254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},94935,e=>{"use strict";e.s(["default",()=>C],94935);var a=e.i(43476),r=e.i(71645),s=e.i(7233),t=e.i(47615),l=e.i(31278),n=e.i(98962),i=e.i(46696),d=e.i(40383),c=e.i(79259),o=e.i(66582),m=e.i(38779),u=e.i(37727),x=e.i(63488),h=e.i(43432),p=e.i(46897),g=e.i(61659),f=e.i(75254);let b=(0,f.default)("building",[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]]);var y=e.i(78583),v=e.i(69638),j=e.i(73884);function N(e){let{farmerId:s,open:t,onClose:n}=e,[i,c]=(0,r.useState)(null),[o,m]=(0,r.useState)(!1),[f,N]=(0,r.useState)(null),{getFarmerById:w}=(0,d.useAdmin)();(0,r.useEffect)(()=>{t&&s?k():(c(null),N(null))},[t,s]);let k=async()=>{if(s){m(!0),N(null);try{let e=parseInt(s.replace(/\D/g,"")),a=await w(e),r=(null==a?void 0:a.data)||a;c(r)}catch(r){var e,a;N((null==r||null==(a=r.response)||null==(e=a.data)?void 0:e.message)||(null==r?void 0:r.message)||"Failed to load farmer details"),console.error("Failed to fetch farmer:",r)}finally{m(!1)}}};return t?(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Farmer Details"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Complete farmer profile information"})]}),(0,a.jsx)("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal",children:(0,a.jsx)(u.X,{className:"w-6 h-6 text-gray-500"})})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:o?(0,a.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(l.Loader2,{className:"w-12 h-12 animate-spin text-primary mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Loading farmer details..."})]})}):f?(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-8 text-center",children:[(0,a.jsx)(j.XCircle,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-red-900 mb-2",children:"Failed to Load Details"}),(0,a.jsx)("p",{className:"text-sm text-red-600",children:f}),(0,a.jsx)("button",{onClick:k,className:"mt-4 px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors",children:"Try Again"})]}):i?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"bg-gradient-to-br from-primary to-emerald-500 rounded-xl p-6 text-white",children:(0,a.jsxs)("div",{className:"flex items-start gap-6",children:[(0,a.jsx)("div",{className:"w-24 h-24 rounded-full bg-white/20 flex items-center justify-center text-3xl font-bold backdrop-blur-sm",children:i.profile_image&&"noimage.jpg"!==i.profile_image?(0,a.jsx)("img",{src:i.profile_image,alt:i.fullname,className:"w-full h-full rounded-full object-cover"}):i.fullname.split(" ").map(e=>e[0]).join("")}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-2xl font-bold mb-2",children:i.fullname}),(0,a.jsxs)("p",{className:"text-white/80 text-sm",children:["Farmer ID: FRM",String(i.id).padStart(4,"0")]})]}),(0,a.jsx)("span",{className:"px-4 py-2 rounded-full text-sm font-semibold ".concat((e=>{switch(e.toLowerCase()){case"active":return"bg-green-100 text-green-700";case"pending":return"bg-amber-100 text-amber-700";case"inactive":default:return"bg-gray-100 text-gray-700";case"suspended":return"bg-red-100 text-red-700"}})(i.status)),children:i.status})]}),(0,a.jsxs)("div",{className:"mt-4 flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[i.phone_verified?(0,a.jsx)(v.CheckCircle,{className:"w-5 h-5"}):(0,a.jsx)(j.XCircle,{className:"w-5 h-5"}),(0,a.jsxs)("span",{className:"text-sm",children:["Phone ",i.phone_verified?"Verified":"Not Verified"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[i.nin_verified?(0,a.jsx)(v.CheckCircle,{className:"w-5 h-5"}):(0,a.jsx)(j.XCircle,{className:"w-5 h-5"}),(0,a.jsxs)("span",{className:"text-sm",children:["NIN ",i.nin_verified?"Verified":"Not Verified"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[i.has_paid?(0,a.jsx)(v.CheckCircle,{className:"w-5 h-5"}):(0,a.jsx)(j.XCircle,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"text-sm",children:i.has_paid?"Paid":"Not Paid"})]})]})]})]})}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(h.Phone,{className:"w-5 h-5 text-gray-400 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Phone Number"}),(0,a.jsx)("p",{className:"text-gray-900 font-medium",children:i.phone_number})]})]}),i.email&&(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(x.Mail,{className:"w-5 h-5 text-gray-400 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Email Address"}),(0,a.jsx)("p",{className:"text-gray-900 font-medium break-all",children:i.email})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3 md:col-span-2",children:[(0,a.jsx)(p.MapPin,{className:"w-5 h-5 text-gray-400 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Address"}),(0,a.jsx)("p",{className:"text-gray-900 font-medium",children:i.address})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Identification"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(y.FileText,{className:"w-5 h-5 text-gray-400 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"National ID Number (NIN)"}),(0,a.jsx)("p",{className:"text-gray-900 font-medium font-mono",children:i.nin})]})]}),i.proof_of_address&&"noimage.jpg"!==i.proof_of_address&&(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(y.FileText,{className:"w-5 h-5 text-gray-400 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Proof of Address"}),(0,a.jsx)("a",{href:i.proof_of_address,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline font-medium",children:"View Document"})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Banking Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(b,{className:"w-5 h-5 text-gray-400 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Account Name"}),(0,a.jsx)("p",{className:"text-gray-900 font-medium",children:i.account_name})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(g.CreditCard,{className:"w-5 h-5 text-gray-400 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Account Number"}),(0,a.jsx)("p",{className:"text-gray-900 font-medium font-mono",children:i.account_number})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(b,{className:"w-5 h-5 text-gray-400 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Bank ID"}),(0,a.jsx)("p",{className:"text-gray-900 font-medium",children:i.bankId})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Registration Date"}),(0,a.jsx)("p",{className:"text-gray-900 font-medium",children:new Date(i.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Last Updated"}),(0,a.jsx)("p",{className:"text-gray-900 font-medium",children:new Date(i.updatedAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Account Created By"}),(0,a.jsxs)("p",{className:"text-gray-900 font-medium",children:["Admin ID: ",i.account_created_by]})]})]})]})]}):null}),(0,a.jsx)("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,a.jsx)("button",{onClick:n,className:"px-6 py-2.5 border border-gray-300 hover:bg-gray-50 text-gray-700 rounded-xl font-medium transition-colors",children:"Close"}),i&&(0,a.jsx)("button",{onClick:()=>{console.log("Edit farmer:",i)},className:"px-6 py-2.5 bg-primary hover:bg-emerald-700 text-white rounded-xl font-medium transition-colors",children:"Edit Farmer"})]})})]})}):null}let w=(0,f.default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);function k(e){let{farmerId:s,open:t,onClose:n,onUpdate:i,getFarmerById:d}=e,[c,o]=(0,r.useState)(null),[m,f]=(0,r.useState)(!1),[v,j]=(0,r.useState)(!1),[N,k]=(0,r.useState)(null),[C,_]=(0,r.useState)({fullname:"",email:"",phone_number:"",address:"",nin:"",account_number:"",account_name:"",bankId:0,status:"pending",id:0});(0,r.useEffect)(()=>{t&&s?S():(o(null),k(null),I())},[t,s]);let S=async()=>{if(s){f(!0),k(null);try{let e=parseInt(s.replace(/\D/g,""));if(!e||isNaN(e))throw Error("Invalid farmer ID");let a=await d(e),r=(null==a?void 0:a.data)||a;o(r),_({fullname:r.fullname||"",email:r.email||"",phone_number:r.phone_number||"",address:r.address||"",nin:r.nin||"",account_number:r.account_number||"",account_name:r.account_name||"",bankId:r.bankId||0,status:r.status||"pending",id:r.id||0})}catch(r){var e,a;k((null==r||null==(a=r.response)||null==(e=a.data)?void 0:e.message)||(null==r?void 0:r.message)||"Failed to load farmer details"),console.error("Failed to fetch farmer:",r)}finally{f(!1)}}},I=()=>{_({fullname:"",email:"",phone_number:"",address:"",nin:"",account_number:"",account_name:"",bankId:0,status:"pending"})},F=e=>{let{name:a,value:r}=e.target;_(e=>({...e,[a]:"bankId"===a?parseInt(r)||0:r}))},A=async()=>{if(!c)return void k("No farmer data available");if(!c.id)return void k("Invalid farmer ID");if(!C.fullname||!C.phone_number||!C.address||!C.nin)return void k("Please fill in all required fields");j(!0),k(null);try{console.log("Updating farmer with ID:",c.id,"Data:",C),await i(c.id,C),n()}catch(r){var e,a;console.error("Update error:",r),k((null==r||null==(a=r.response)||null==(e=a.data)?void 0:e.message)||(null==r?void 0:r.message)||"Failed to update farmer")}finally{j(!1)}};return t?(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Edit Farmer"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Update farmer profile information"})]}),(0,a.jsx)("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal",children:(0,a.jsx)(u.X,{className:"w-6 h-6 text-gray-500"})})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:m?(0,a.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(l.Loader2,{className:"w-12 h-12 animate-spin text-emerald-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Loading farmer details..."})]})}):N&&!c?(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-8 text-center",children:[(0,a.jsxs)("div",{className:"text-red-600 mb-4",children:[(0,a.jsx)("p",{className:"text-lg font-semibold mb-2",children:"Failed to Load Details"}),(0,a.jsx)("p",{className:"text-sm",children:N})]}),(0,a.jsx)("button",{type:"button",onClick:S,className:"mt-4 px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors",children:"Try Again"})]}):c?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"bg-gradient-to-br from-emerald-600 to-emerald-500 rounded-xl p-6 text-white",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-16 h-16 rounded-full bg-white/20 flex items-center justify-center text-2xl font-bold backdrop-blur-sm",children:c.profile_image&&"noimage.jpg"!==c.profile_image?(0,a.jsx)("img",{src:c.profile_image,alt:c.fullname,className:"w-full h-full rounded-full object-cover"}):c.fullname.split(" ").map(e=>e[0]).join("")}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm opacity-90",children:"Editing Farmer"}),(0,a.jsxs)("p",{className:"text-xl font-bold",children:["FRM",String(c.id).padStart(4,"0")]})]})]})}),N&&c&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:(0,a.jsx)("p",{className:"text-sm text-red-600",children:N})}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,a.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(y.FileText,{className:"w-5 h-5"}),"Personal Information"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Full Name ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",name:"fullname",value:C.fullname,onChange:F,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter full name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,a.jsx)(h.Phone,{className:"w-4 h-4 inline mr-1"}),"Phone Number ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"tel",name:"phone_number",value:C.phone_number,onChange:F,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter phone number"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,a.jsx)(x.Mail,{className:"w-4 h-4 inline mr-1"}),"Email Address"]}),(0,a.jsx)("input",{type:"email",name:"email",value:C.email,onChange:F,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter email address"})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,a.jsx)(p.MapPin,{className:"w-4 h-4 inline mr-1"}),"Address ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("textarea",{name:"address",value:C.address,onChange:F,rows:3,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent resize-none",placeholder:"Enter full address"})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,a.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(y.FileText,{className:"w-5 h-5"}),"Identification"]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["National ID Number (NIN) ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",name:"nin",value:C.nin,onChange:F,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent font-mono",placeholder:"Enter NIN"})]})})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,a.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(b,{className:"w-5 h-5"}),"Banking Information"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Account Name ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",name:"account_name",value:C.account_name,onChange:F,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter account name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,a.jsx)(g.CreditCard,{className:"w-4 h-4 inline mr-1"}),"Account Number ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",name:"account_number",value:C.account_number,onChange:F,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent font-mono",placeholder:"Enter account number"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Bank ID ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"number",name:"bankId",value:C.bankId,onChange:F,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter bank ID"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Status ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("select",{name:"status",value:C.status,onChange:F,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"pending",children:"Pending"}),(0,a.jsx)("option",{value:"active",children:"Active"}),(0,a.jsx)("option",{value:"inactive",children:"Inactive"}),(0,a.jsx)("option",{value:"suspended",children:"Suspended"})]})]})]})]})]}):null}),(0,a.jsx)("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,a.jsx)("button",{onClick:n,disabled:v,className:"px-6 py-2.5 border border-gray-300 hover:bg-gray-50 text-gray-700 rounded-xl font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),(0,a.jsx)("button",{onClick:A,disabled:v||m||!c,className:"px-6 py-2.5 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:v?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Loader2,{className:"w-5 h-5 animate-spin"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w,{className:"w-5 h-5"}),"Save Changes"]})})]})})]})}):null}function C(e){let{onAddFarmer:u}=e,[x,h]=(0,r.useState)("all"),[p,g]=(0,r.useState)(!1),[f,b]=(0,r.useState)([]),[y,v]=(0,r.useState)(!0),[j,w]=(0,r.useState)(null),[C,_]=(0,r.useState)(null),[S,I]=(0,r.useState)(!1),[F,A]=(0,r.useState)(!1),[D,M]=(0,r.useState)(null),{fetchFarmers:E,farmers:P}=(0,d.useAdmin)();(0,r.useEffect)(()=>{z()},[]);let L=e=>({id:"FRM".concat(String(e.id).padStart(4,"0")),name:e.fullname,email:e.email,phone:e.phone_number,farmSize:"N/A",registrationDate:new Date(e.createdAt).toLocaleDateString(),status:e.status.toLowerCase(),nin:e.nin,address:e.address,state:"",lga:"",photoUrl:"noimage.jpg"!==e.profile_image?e.profile_image:void 0}),z=async()=>{v(!0),w(null);try{let e=await m.AdminService.getFarmers(),a=((null==e?void 0:e.data)||[]).map(L);b(a)}catch(r){var e,a;w((null==r||null==(a=r.response)||null==(e=a.data)?void 0:e.message)||"Failed to load farmers"),console.error("Failed to fetch farmers:",r)}finally{v(!1)}},R=async e=>{try{return await m.AdminService.getFarmerById(e)}catch(e){throw console.error("Failed to fetch farmer by ID:",e),e}},V=async(e,a)=>{try{let r="string"==typeof e?parseInt(e.replace(/\D/g,"")):e;await m.AdminService.updateFarmer(r,a),i.toast.success("Farmer updated successfully")}catch(a){var r,s;let e=(null==a||null==(s=a.response)||null==(r=s.data)?void 0:r.message)||"Failed to update farmer";throw i.toast.error(e),a}},U=async e=>{try{u&&await u(e),i.toast.success("Farmer registered successfully"),g(!1),await z()}catch(e){throw i.toast.error("Failed to register farmer. Please try again."),e}},T="all"===x?f:f.filter(e=>e.status===x);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Farmer Management"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Manage and onboard farmers across all regions"})]})}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"relative flex-1",children:(0,a.jsx)("input",{type:"text",placeholder:"Search farmers by name, ID, or phone...",className:"w-full px-4 py-3 bg-white border border-gray-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(t.Filter,{className:"w-5 h-5 text-gray-400"}),(0,a.jsxs)("select",{value:x,onChange:e=>h(e.target.value),className:"px-4 py-3 bg-white border border-gray-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[(0,a.jsx)("option",{value:"all",children:"All Farmers"}),(0,a.jsx)("option",{value:"active",children:"Active"}),(0,a.jsx)("option",{value:"pending",children:"Pending"}),(0,a.jsx)("option",{value:"inactive",children:"Inactive"}),(0,a.jsx)("option",{value:"suspended",children:"Suspended"})]})]})]}),y?(0,a.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(l.Loader2,{className:"w-12 h-12 animate-spin text-primary mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Loading farmers..."})]})}):j?(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-8 text-center",children:[(0,a.jsxs)("div",{className:"text-red-600 mb-4",children:[(0,a.jsx)(n.UserX,{className:"w-12 h-12 mx-auto mb-2"}),(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Failed to Load Farmers"}),(0,a.jsx)("p",{className:"text-sm mt-2",children:j})]}),(0,a.jsx)("button",{onClick:z,className:"mt-4 px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors",children:"Try Again"})]}):0===T.length?(0,a.jsxs)("div",{className:"bg-gray-50 border-2 border-dashed border-gray-300 rounded-xl p-12 text-center",children:[(0,a.jsx)(n.UserX,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"all"===x?"No Farmers Yet":"No ".concat(x.charAt(0).toUpperCase()+x.slice(1)," Farmers")}),(0,a.jsx)("p",{className:"text-gray-500 mb-6",children:"all"===x?"Get started by adding your first farmer to the system":"There are no ".concat(x," farmers at the moment")}),"all"===x?(0,a.jsxs)("button",{onClick:()=>g(!0),className:"inline-flex items-center gap-2 bg-primary hover:bg-emerald-700 text-white px-6 py-3 rounded-xl font-medium transition-colors",children:[(0,a.jsx)(s.Plus,{className:"w-5 h-5"}),"Add Your First Farmer"]}):(0,a.jsx)("button",{onClick:()=>h("all"),className:"inline-flex items-center gap-2 bg-gray-200 hover:bg-gray-300 text-gray-700 px-6 py-3 rounded-xl font-medium transition-colors",children:"View All Farmers"})]}):(0,a.jsx)(c.default,{farmers:T,onView:e=>{_(e.id),I(!0)},onEdit:e=>{M(e.id),A(!0)}})]}),(0,a.jsx)(o.default,{open:p,onClose:()=>g(!1),onSubmit:U}),(0,a.jsx)(N,{farmerId:C,open:S,onClose:()=>{I(!1),_(null)}}),(0,a.jsx)(k,{farmerId:D,open:F,onClose:()=>{A(!1),M(null)},onUpdate:async(e,a)=>{await V(e,a),await z()},getFarmerById:R})]})}}]);