module.exports=[16949,a=>{"use strict";a.s(["default",()=>z],16949);var b=a.i(87924),c=a.i(72131),d=a.i(15618),e=a.i(69012),f=a.i(96221),g=a.i(92319),h=a.i(23292),i=a.i(77668),j=a.i(3606),k=a.i(34817),l=a.i(52223),m=a.i(33508),n=a.i(92258),o=a.i(63519),p=a.i(24987),q=a.i(11156),r=a.i(70106);let s=(0,r.default)("building",[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]]);var t=a.i(4720),u=a.i(16201),v=a.i(62722);function w({farmerId:a,open:d,onClose:e}){let[g,h]=(0,c.useState)(null),[j,k]=(0,c.useState)(!1),[l,r]=(0,c.useState)(null),{getFarmerById:w}=(0,i.useAdmin)();(0,c.useEffect)(()=>{d&&a?x():(h(null),r(null))},[d,a]);let x=async()=>{if(a){k(!0),r(null);try{let b=parseInt(a.replace(/\D/g,"")),c=await w(b),d=c?.data||c;h(d)}catch(a){r(a?.response?.data?.message||a?.message||"Failed to load farmer details"),console.error("Failed to fetch farmer:",a)}finally{k(!1)}}};return d?(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Farmer Details"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Complete farmer profile information"})]}),(0,b.jsx)("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal",children:(0,b.jsx)(m.X,{className:"w-6 h-6 text-gray-500"})})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:j?(0,b.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(f.Loader2,{className:"w-12 h-12 animate-spin text-primary mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-500",children:"Loading farmer details..."})]})}):l?(0,b.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-8 text-center",children:[(0,b.jsx)(v.XCircle,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-red-900 mb-2",children:"Failed to Load Details"}),(0,b.jsx)("p",{className:"text-sm text-red-600",children:l}),(0,b.jsx)("button",{onClick:x,className:"mt-4 px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors",children:"Try Again"})]}):g?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"bg-gradient-to-br from-primary to-emerald-500 rounded-xl p-6 text-white",children:(0,b.jsxs)("div",{className:"flex items-start gap-6",children:[(0,b.jsx)("div",{className:"w-24 h-24 rounded-full bg-white/20 flex items-center justify-center text-3xl font-bold backdrop-blur-sm",children:g.profile_image&&"noimage.jpg"!==g.profile_image?(0,b.jsx)("img",{src:g.profile_image,alt:g.fullname,className:"w-full h-full rounded-full object-cover"}):g.fullname.split(" ").map(a=>a[0]).join("")}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-2xl font-bold mb-2",children:g.fullname}),(0,b.jsxs)("p",{className:"text-white/80 text-sm",children:["Farmer ID: FRM",String(g.id).padStart(4,"0")]})]}),(0,b.jsx)("span",{className:`px-4 py-2 rounded-full text-sm font-semibold ${(a=>{switch(a.toLowerCase()){case"active":return"bg-green-100 text-green-700";case"pending":return"bg-amber-100 text-amber-700";case"inactive":default:return"bg-gray-100 text-gray-700";case"suspended":return"bg-red-100 text-red-700"}})(g.status)}`,children:g.status})]}),(0,b.jsxs)("div",{className:"mt-4 flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[g.phone_verified?(0,b.jsx)(u.CheckCircle,{className:"w-5 h-5"}):(0,b.jsx)(v.XCircle,{className:"w-5 h-5"}),(0,b.jsxs)("span",{className:"text-sm",children:["Phone ",g.phone_verified?"Verified":"Not Verified"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[g.nin_verified?(0,b.jsx)(u.CheckCircle,{className:"w-5 h-5"}):(0,b.jsx)(v.XCircle,{className:"w-5 h-5"}),(0,b.jsxs)("span",{className:"text-sm",children:["NIN ",g.nin_verified?"Verified":"Not Verified"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[g.has_paid?(0,b.jsx)(u.CheckCircle,{className:"w-5 h-5"}):(0,b.jsx)(v.XCircle,{className:"w-5 h-5"}),(0,b.jsx)("span",{className:"text-sm",children:g.has_paid?"Paid":"Not Paid"})]})]})]})]})}),(0,b.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,b.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact Information"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(o.Phone,{className:"w-5 h-5 text-gray-400 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Phone Number"}),(0,b.jsx)("p",{className:"text-gray-900 font-medium",children:g.phone_number})]})]}),g.email&&(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(n.Mail,{className:"w-5 h-5 text-gray-400 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Email Address"}),(0,b.jsx)("p",{className:"text-gray-900 font-medium break-all",children:g.email})]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-3 md:col-span-2",children:[(0,b.jsx)(p.MapPin,{className:"w-5 h-5 text-gray-400 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Address"}),(0,b.jsx)("p",{className:"text-gray-900 font-medium",children:g.address})]})]})]})]}),(0,b.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,b.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Identification"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(t.FileText,{className:"w-5 h-5 text-gray-400 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"National ID Number (NIN)"}),(0,b.jsx)("p",{className:"text-gray-900 font-medium font-mono",children:g.nin})]})]}),g.proof_of_address&&"noimage.jpg"!==g.proof_of_address&&(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(t.FileText,{className:"w-5 h-5 text-gray-400 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Proof of Address"}),(0,b.jsx)("a",{href:g.proof_of_address,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline font-medium",children:"View Document"})]})]})]})]}),(0,b.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,b.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Banking Information"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(s,{className:"w-5 h-5 text-gray-400 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Account Name"}),(0,b.jsx)("p",{className:"text-gray-900 font-medium",children:g.account_name})]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(q.CreditCard,{className:"w-5 h-5 text-gray-400 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Account Number"}),(0,b.jsx)("p",{className:"text-gray-900 font-medium font-mono",children:g.account_number})]})]}),(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(s,{className:"w-5 h-5 text-gray-400 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Bank ID"}),(0,b.jsx)("p",{className:"text-gray-900 font-medium",children:g.bankId})]})]})]})]}),(0,b.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,b.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"System Information"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Registration Date"}),(0,b.jsx)("p",{className:"text-gray-900 font-medium",children:new Date(g.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Last Updated"}),(0,b.jsx)("p",{className:"text-gray-900 font-medium",children:new Date(g.updatedAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Account Created By"}),(0,b.jsxs)("p",{className:"text-gray-900 font-medium",children:["Admin ID: ",g.account_created_by]})]})]})]})]}):null}),(0,b.jsx)("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,b.jsx)("button",{onClick:e,className:"px-6 py-2.5 border border-gray-300 hover:bg-gray-50 text-gray-700 rounded-xl font-medium transition-colors",children:"Close"}),g&&(0,b.jsx)("button",{onClick:()=>{console.log("Edit farmer:",g)},className:"px-6 py-2.5 bg-primary hover:bg-emerald-700 text-white rounded-xl font-medium transition-colors",children:"Edit Farmer"})]})})]})}):null}let x=(0,r.default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);function y({farmerId:a,open:d,onClose:e,onUpdate:g,getFarmerById:h}){let[i,j]=(0,c.useState)(null),[k,l]=(0,c.useState)(!1),[r,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(null),[y,z]=(0,c.useState)({fullname:"",email:"",phone_number:"",address:"",nin:"",account_number:"",account_name:"",bankId:0,status:"pending",id:0});(0,c.useEffect)(()=>{d&&a?A():(j(null),w(null),B())},[d,a]);let A=async()=>{if(a){l(!0),w(null);try{let b=parseInt(a.replace(/\D/g,""));if(!b||isNaN(b))throw Error("Invalid farmer ID");let c=await h(b),d=c?.data||c;j(d),z({fullname:d.fullname||"",email:d.email||"",phone_number:d.phone_number||"",address:d.address||"",nin:d.nin||"",account_number:d.account_number||"",account_name:d.account_name||"",bankId:d.bankId||0,status:d.status||"pending",id:d.id||0})}catch(a){w(a?.response?.data?.message||a?.message||"Failed to load farmer details"),console.error("Failed to fetch farmer:",a)}finally{l(!1)}}},B=()=>{z({fullname:"",email:"",phone_number:"",address:"",nin:"",account_number:"",account_name:"",bankId:0,status:"pending"})},C=a=>{let{name:b,value:c}=a.target;z(a=>({...a,[b]:"bankId"===b?parseInt(c)||0:c}))},D=async()=>{if(!i)return void w("No farmer data available");if(!i.id)return void w("Invalid farmer ID");if(!y.fullname||!y.phone_number||!y.address||!y.nin)return void w("Please fill in all required fields");u(!0),w(null);try{console.log("Updating farmer with ID:",i.id,"Data:",y),await g(i.id,y),e()}catch(a){console.error("Update error:",a),w(a?.response?.data?.message||a?.message||"Failed to update farmer")}finally{u(!1)}};return d?(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Edit Farmer"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Update farmer profile information"})]}),(0,b.jsx)("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal",children:(0,b.jsx)(m.X,{className:"w-6 h-6 text-gray-500"})})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:k?(0,b.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(f.Loader2,{className:"w-12 h-12 animate-spin text-emerald-600 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-500",children:"Loading farmer details..."})]})}):v&&!i?(0,b.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-8 text-center",children:[(0,b.jsxs)("div",{className:"text-red-600 mb-4",children:[(0,b.jsx)("p",{className:"text-lg font-semibold mb-2",children:"Failed to Load Details"}),(0,b.jsx)("p",{className:"text-sm",children:v})]}),(0,b.jsx)("button",{type:"button",onClick:A,className:"mt-4 px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors",children:"Try Again"})]}):i?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"bg-gradient-to-br from-emerald-600 to-emerald-500 rounded-xl p-6 text-white",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-16 h-16 rounded-full bg-white/20 flex items-center justify-center text-2xl font-bold backdrop-blur-sm",children:i.profile_image&&"noimage.jpg"!==i.profile_image?(0,b.jsx)("img",{src:i.profile_image,alt:i.fullname,className:"w-full h-full rounded-full object-cover"}):i.fullname.split(" ").map(a=>a[0]).join("")}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm opacity-90",children:"Editing Farmer"}),(0,b.jsxs)("p",{className:"text-xl font-bold",children:["FRM",String(i.id).padStart(4,"0")]})]})]})}),v&&i&&(0,b.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:(0,b.jsx)("p",{className:"text-sm text-red-600",children:v})}),(0,b.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,b.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,b.jsx)(t.FileText,{className:"w-5 h-5"}),"Personal Information"]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Full Name ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",name:"fullname",value:y.fullname,onChange:C,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter full name"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,b.jsx)(o.Phone,{className:"w-4 h-4 inline mr-1"}),"Phone Number ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"tel",name:"phone_number",value:y.phone_number,onChange:C,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter phone number"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,b.jsx)(n.Mail,{className:"w-4 h-4 inline mr-1"}),"Email Address"]}),(0,b.jsx)("input",{type:"email",name:"email",value:y.email,onChange:C,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter email address"})]}),(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,b.jsx)(p.MapPin,{className:"w-4 h-4 inline mr-1"}),"Address ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("textarea",{name:"address",value:y.address,onChange:C,rows:3,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent resize-none",placeholder:"Enter full address"})]})]})]}),(0,b.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,b.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,b.jsx)(t.FileText,{className:"w-5 h-5"}),"Identification"]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["National ID Number (NIN) ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",name:"nin",value:y.nin,onChange:C,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent font-mono",placeholder:"Enter NIN"})]})})]}),(0,b.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,b.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,b.jsx)(s,{className:"w-5 h-5"}),"Banking Information"]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Account Name ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",name:"account_name",value:y.account_name,onChange:C,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter account name"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,b.jsx)(q.CreditCard,{className:"w-4 h-4 inline mr-1"}),"Account Number ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",name:"account_number",value:y.account_number,onChange:C,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent font-mono",placeholder:"Enter account number"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Bank ID ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"number",name:"bankId",value:y.bankId,onChange:C,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter bank ID"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Status ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("select",{name:"status",value:y.status,onChange:C,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent",children:[(0,b.jsx)("option",{value:"pending",children:"Pending"}),(0,b.jsx)("option",{value:"active",children:"Active"}),(0,b.jsx)("option",{value:"inactive",children:"Inactive"}),(0,b.jsx)("option",{value:"suspended",children:"Suspended"})]})]})]})]})]}):null}),(0,b.jsx)("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,b.jsx)("button",{onClick:e,disabled:r,className:"px-6 py-2.5 border border-gray-300 hover:bg-gray-50 text-gray-700 rounded-xl font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),(0,b.jsx)("button",{onClick:D,disabled:r||k||!i,className:"px-6 py-2.5 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:r?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.Loader2,{className:"w-5 h-5 animate-spin"}),"Saving..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(x,{className:"w-5 h-5"}),"Save Changes"]})})]})})]})}):null}function z({onAddFarmer:a}){let[m,n]=(0,c.useState)("all"),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)([]),[s,t]=(0,c.useState)(!0),[u,v]=(0,c.useState)(null),[x,z]=(0,c.useState)(null),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(null),{fetchFarmers:G,farmers:H}=(0,i.useAdmin)();(0,c.useEffect)(()=>{J()},[]);let I=a=>({id:`FRM${String(a.id).padStart(4,"0")}`,name:a.fullname,email:a.email,phone:a.phone_number,farmSize:"N/A",registrationDate:new Date(a.createdAt).toLocaleDateString(),status:a.status.toLowerCase(),nin:a.nin,address:a.address,state:"",lga:"",photoUrl:"noimage.jpg"!==a.profile_image?a.profile_image:void 0}),J=async()=>{t(!0),v(null);try{let a=await l.AdminService.getFarmers(),b=(a?.data||[]).map(I);r(b)}catch(a){v(a?.response?.data?.message||"Failed to load farmers"),console.error("Failed to fetch farmers:",a)}finally{t(!1)}},K=async a=>{try{return await l.AdminService.getFarmerById(a)}catch(a){throw console.error("Failed to fetch farmer by ID:",a),a}},L=async(a,b)=>{try{let c="string"==typeof a?parseInt(a.replace(/\D/g,"")):a;await l.AdminService.updateFarmer(c,b),h.toast.success("Farmer updated successfully")}catch(b){let a=b?.response?.data?.message||"Failed to update farmer";throw h.toast.error(a),b}},M=async b=>{try{a&&await a(b),h.toast.success("Farmer registered successfully"),p(!1),await J()}catch(a){throw h.toast.error("Failed to register farmer. Please try again."),a}},N="all"===m?q:q.filter(a=>a.status===m);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Farmer Management"}),(0,b.jsx)("p",{className:"text-gray-500",children:"Manage and onboard farmers across all regions"})]})}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"relative flex-1",children:(0,b.jsx)("input",{type:"text",placeholder:"Search farmers by name, ID, or phone...",className:"w-full px-4 py-3 bg-white border border-gray-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(e.Filter,{className:"w-5 h-5 text-gray-400"}),(0,b.jsxs)("select",{value:m,onChange:a=>n(a.target.value),className:"px-4 py-3 bg-white border border-gray-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[(0,b.jsx)("option",{value:"all",children:"All Farmers"}),(0,b.jsx)("option",{value:"active",children:"Active"}),(0,b.jsx)("option",{value:"pending",children:"Pending"}),(0,b.jsx)("option",{value:"inactive",children:"Inactive"}),(0,b.jsx)("option",{value:"suspended",children:"Suspended"})]})]})]}),s?(0,b.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(f.Loader2,{className:"w-12 h-12 animate-spin text-primary mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-500",children:"Loading farmers..."})]})}):u?(0,b.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-8 text-center",children:[(0,b.jsxs)("div",{className:"text-red-600 mb-4",children:[(0,b.jsx)(g.UserX,{className:"w-12 h-12 mx-auto mb-2"}),(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Failed to Load Farmers"}),(0,b.jsx)("p",{className:"text-sm mt-2",children:u})]}),(0,b.jsx)("button",{onClick:J,className:"mt-4 px-6 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors",children:"Try Again"})]}):0===N.length?(0,b.jsxs)("div",{className:"bg-gray-50 border-2 border-dashed border-gray-300 rounded-xl p-12 text-center",children:[(0,b.jsx)(g.UserX,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"all"===m?"No Farmers Yet":`No ${m.charAt(0).toUpperCase()+m.slice(1)} Farmers`}),(0,b.jsx)("p",{className:"text-gray-500 mb-6",children:"all"===m?"Get started by adding your first farmer to the system":`There are no ${m} farmers at the moment`}),"all"===m?(0,b.jsxs)("button",{onClick:()=>p(!0),className:"inline-flex items-center gap-2 bg-primary hover:bg-emerald-700 text-white px-6 py-3 rounded-xl font-medium transition-colors",children:[(0,b.jsx)(d.Plus,{className:"w-5 h-5"}),"Add Your First Farmer"]}):(0,b.jsx)("button",{onClick:()=>n("all"),className:"inline-flex items-center gap-2 bg-gray-200 hover:bg-gray-300 text-gray-700 px-6 py-3 rounded-xl font-medium transition-colors",children:"View All Farmers"})]}):(0,b.jsx)(j.default,{farmers:N,onView:a=>{z(a.id),B(!0)},onEdit:a=>{F(a.id),D(!0)}})]}),(0,b.jsx)(k.default,{open:o,onClose:()=>p(!1),onSubmit:M}),(0,b.jsx)(w,{farmerId:x,open:A,onClose:()=>{B(!1),z(null)}}),(0,b.jsx)(y,{farmerId:E,open:C,onClose:()=>{D(!1),F(null)},onUpdate:async(a,b)=>{await L(a,b),await J()},getFarmerById:K})]})}}];

//# sourceMappingURL=app_admin_dashboard_farmers_page_tsx_a337b533._.js.map